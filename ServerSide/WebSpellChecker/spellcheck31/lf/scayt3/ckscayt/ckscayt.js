/**
 * SCAYT v3.0.6950
 * Copyright (c) 1999-2015 SpellChecker.net, Inc. All rights reserved.
 */

/*!
 * jQuip JavaScript Library v0.0.3
 * https://github.com/mythz/jquip
 *
 * Copyright, Demis Bellot
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 */

/*!
 * Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2012, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3alpha.681
 * Build date: 20 July 2012
 */

/*! @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 0.8.1 - Build: 266 (2012/07/31 03:33 PM)
 */ 
var SCAYT=SCAYT||function(a){function b(a,b){for(var c in a)b.register(c,a[c]),b.start(c)}function c(a,b){var c=function(){try{d[a].instance=new d[a].creator(a,new SCAYT.Sandbox(a,b))}catch(c){throw new Error("Could not create Module instance with id: "+a+" : "+c.message)}e(a,b)},e=function(){d[a].instance.init&&d[a].instance.init()};return d[a].instance?!1:(c(a,b),!0)}var d={},e=function(a,b){return{value:void 0,defaultValue:a,storable:b}},f={container:e(void 0,!1),focused:e(!1,!1),leftMouseButtonPressed:e(!1,!1),debug:e(!1,!1),isIframe:e(!1,!1),showBanner:e(!1,!1),sendBannerRequest:e(!0,!1),customer_id:e("1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",!1),basePath:e("",!1),service_protocol:e("http",!1),service_host:e(location.hostname,!1),service_port:e("80",!1),service_path:e("cgi-bin/spellcheck31/script/ssrv.cgi",!1),data_attribute_name:e("data-scayt-word",!1),misspelled_word_node:e("span",!1),misspelled_word_class:e("red",!1),punctuationRegExp:e(/,\^\$\*\+\?\=\!\:\|\\\/\(\)\[\]\{\}\>\<\@\%\&\#\;\_\~ /,!1),blockElementsRegex:e(/^(br|img|caption|button|address|blockquote|body|center|dir|div|dl|fieldset|form|h[1-6]|hr|isindex|menu|noframes|noscript|ol|p|pre|table|ul|dd|dt|frameset|li|tbody|td|tfoot|th|thead|tr|html|select|option|sup|sub|input)$/i,!1),ignoreElementsRegex:e("style",!1),paused:e(!1,!1),langList:e({},!1),"ignore-all-caps-words":e(!1,!0),"ignore-domain-names":e(!0,!0),"ignore-words-with-mixed-cases":e(!1,!0),"ignore-words-with-numbers":e(!1,!0),userDictionaryKey:e("scayt_user_dictionary",!1),userDictionaryNameKey:e("scayt_user_dictionary_name",!1),userDictionaryName:e(null,!1),scaytLogo:e("css/logo.gif",!1),scaytVersion:e("3.0.6950",!1),lang:e("en_US",!0),maxSuggestionsDefault:e(5,!1),minWordLength:e(4,!1),customDictionary:e("",!1),localizationPath:e("local/",!1),localizationList:e(["af","ar","bg","bn","bs","ca","cs","cy","da","de","el","en-us","en-au","en-ca","en-gb","en","eo","es","et","eu","fa","fi","fo","fr-ca","fr","gl","gu","he","hi","hr","hu","is","it","ja","ka","km","ko","lt","lv","mk","mn","ms","nb","nl","no","pl","pt-br","pt","ro","ru","sk","sl","sr-latn","sr","sv","th","tr","ug","uk","ku","vi","zh-cn","zh"],!1),localization:e("en",!1),cssPath:e("css/scayt.css",!1),uid:e(void 0,!1),documentContainer:e(void 0,!1),"options-to-restore":e(["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],!1)};delete a.words_separator,delete a.paused,delete a.langList,delete a.showBanner,delete a.uid,f.documentContainer.value="[object String]"==Object.prototype.toString.call(a.container)?document.getElementById(a.container):a.container,f.isIframe.value="iframe"==f.documentContainer.value.nodeName.toLowerCase()?!0:!1,f.basePath.value=a.basePath,f.localizationPath.value=f.basePath.value?this.Utils.getUrl(f.localizationPath.defaultValue,f.basePath.value):f.localizationPath.defaultValue,f.cssPath.value=f.basePath.value?this.Utils.getUrl(f.cssPath.defaultValue,f.basePath.value):f.cssPath.defaultValue;var g=this.Utils.getLocationInfo(f.basePath.value);g.pathname='cgi-bin/spellcheck31/lf/scayt3/ckscayt/';"file"!=g.protocol&&(f.service_protocol.value=g.protocol,f.service_host.value=g.host,f.service_port.value=g.port?g.port:"80",f.service_path.value=g.pathname+"./../../../script/ssrv.cgi");for(var h in a)f[h].value=a[h];for(h in f)"undefined"==typeof f[h].value&&(f[h].value=f[h].defaultValue);if(this.options=f,this.options.localization.value=-1==this.Utils.indexOf(this.options.localizationList.value,this.options.localization.value)?this.options.localization.defaultValue:this.options.localization.value,this.options.sendBannerRequest.value=this.options.service_host.value==this.options.service_host.defaultValue?!0:!1,this.options.container.value="iframe"==this.options.documentContainer.value.nodeName.toLowerCase()?this.options.documentContainer.value.contentDocument?this.options.documentContainer.value.contentDocument.getElementsByTagName("body")[0]:this.options.documentContainer.value.contentWindow.document.getElementsByTagName("body")[0]:this.options.documentContainer.value,this.options.uid.value=this.instanceManager.getUniqueId(this.options.documentContainer.value),"string"==typeof this.options.ignoreElementsRegex.value)if(this.options.ignoreElementsRegex.value=this.options.ignoreElementsRegex.value.replace(/ /g,""),this.options.ignoreElementsRegex.value=this.options.ignoreElementsRegex.value.replace(/,/g,"|"),""!=this.options.ignoreElementsRegex.value)for(var i=this.options.ignoreElementsRegex.defaultValue.split("|"),j=0;j<i.length;j++)this.options.ignoreElementsRegex.value.match(new RegExp("\\b"+i[j]+"\\b","g"))||(this.options.ignoreElementsRegex.value=this.options.ignoreElementsRegex.value+"|"+i[j]);else this.options.ignoreElementsRegex.value=this.options.ignoreElementsRegex.defaultValue;else this.options.ignoreElementsRegex.value=this.options.ignoreElementsRegex.defaultValue;this.options.ignoreElementsRegex.value=new RegExp("^("+this.options.ignoreElementsRegex.value+")$","i");for(var k,l,j=0,m=this.options["options-to-restore"].value.length;m>j;j++)k=this.options["options-to-restore"].value[j],this.options[k]&&this.options[k].storable&&(l=this.DataStorage.getData(this.options.uid.value+"_"+k),"undefined"!=typeof l&&null!==l?this.options[k].value=l:this.DataStorage.setData(this.options.uid.value+"_"+k,this.options[k].value));for(h in this.options)this.options[h].storable&&-1==this.Utils.indexOf(this.options["options-to-restore"].value,h)&&this.DataStorage.deleteData(this.options.uid.value+"_"+h);var n=this,o=this.UILib.find(this.options.container.value)[0],p=this.UILib.find(this.options.documentContainer.value.contentWindow||this.options.container.value)[0],q=function(){n.options.focused.value=!0},r=function(){n.options.focused.value=!1},s=function(){n.options.leftMouseButtonPressed.value=!0},t=function(){n.options.leftMouseButtonPressed.value=!1};this.UILib.on("focus",p,q),this.UILib.on("blur",p,r),this.UILib.on("mousedown",o,s),this.UILib.on("mouseup",o,t);var u={Communication:SCAYT.Communication,RangeCreator:SCAYT.RangeCreator,Deferred:SCAYT.Deferred};this.register=function(a,b){d[a]=d[a]||{creator:b,instance:null}},this.getService=function(a){return d[a]?d[a].instance:void 0},this.start=function(a){c(a,this)?this.getService("Communication").fire("SCAYT","moduleStarted",a):this.getService("Communication").fire("SCAYT","moduleStarted",a+" already started.")},this.removeBindings=function(){this.UILib.off("focus",p,q),this.UILib.off("blur",p,r),this.UILib.off("mousedown",o,s),this.UILib.off("mouseup",o,t)},b(u,this)};SCAYT.Sandbox=function(a,b){function c(){var a,b=this.getOption("leftMouseButtonPressed"),c=this.Utils.browser.ie;return a=c&&b?!1:!0}this.createRange=function(){var c=b.getService("RangeCreator").createRange();return b.logger.log({name:a,msg:"Create the range",data:c,type:"range"}),c},this.getSelection=function(){var c=b.getService("RangeCreator").getSelection();return b.logger.log({name:a,msg:"Get the selection",data:c,type:"selection"}),c},this.saveSelection=function(){var d;return c.apply(this)?(d=b.getService("RangeCreator").getSelectionManager().saveSelection(),b.logger.log({name:a,msg:"Save the selection",data:d,type:"selection"}),d):void 0},this.restoreSelection=function(d){var e;return d&&c.apply(this)?(e=b.getService("RangeCreator").getSelectionManager().restoreSelection(d),b.logger.log({name:a,msg:"Restore the selection",data:e,type:"selection"}),e):void 0},this.IO=b.IO,this.DOM=b.DOM,this.Utils=b.Utils,this.logger=b.logger.log,b.logger.isON(b.options.debug.value),this.Localization=b.Localization,this.Template=b.Template,this.DataStorage=b.DataStorage,this.UILib=b.UILib,this.fire=function(c,d){b.logger.log({name:a,msg:"Fired event: "+c+" with such data -> ",data:d,type:"signals"}),b.options.paused.value!==!0&&b.getService("Communication").fire(a,c,d)},this.subscribe=function(c,d,e,f){e=e||b.getService(a);var g=function(){return b.logger.log({name:a,msg:"Responded to the event: "+c+" with data -> ",data:arguments[0],type:"signals"}),d.apply(e,arguments)};b.getService("Communication").subscribe(a,c,g,e,f)},this.unsubscribe=function(c){b.logger.log({name:a,msg:"Unsubscribe to the event: "+c,type:"signals"}),b.getService("Communication").unsubscribe(a,c)},this.fireInAllApps=function(a,c){b.instanceManager.notifyAll(a,c)},this.getOption=function(c){for(var d="[object String]"==Object.prototype.toString.call(c)?[c]:c,e={},f=0;f<d.length;f++)e[d[f]]=b.options[d[f]].value;var g=1==d.length?e[d[0]]:e;return b.logger.log({name:a,msg:'Get the "'+d+'" option with value -> ',data:g,type:"options"}),g},this.getDefaultOption=function(a){for(var c="[object String]"==Object.prototype.toString.call(a)?[a]:a,d={},e=0;e<c.length;e++)d[c[e]]=b.options[c[e]].defaultValue;return 1==c.length?d[c[0]]:d},this.setOption=function(c,d){c in b.options&&(b.options[c].value=d,b.options[c].storable&&this.Utils.indexOf(this.getOption("options-to-restore"),c)>-1&&(b.logger.log({name:a,msg:'Set the "'+c+'" option with value -> ',data:d,type:"options"}),this.DataStorage.setData(this.getOption("uid")+"_"+c,d)))},this.addDeferredFunction=function(a,c){b.getService("Deferred").register(a,c)},this.removeAllDeferredFunctions=function(){b.getService("Deferred").unregisterAll()},this.setFocused=function(a){return b.options.focused.value=a},this.setPaused=function(a){return b.options.paused.value=a},this.setContainer=function(a){return b.options.container.value=a},this.removeMarkupFromString=function(a){var b=this,c=document.createElement("div"),d=b.getOption("misspelled_word_node"),e=b.getOption("data_attribute_name");c.innerHTML=a;for(var f=b.DOM.findScaytChildren(c,d,e);f.length>0;){for(var g=f.shift(),h=document.createDocumentFragment();g.childNodes.length>0;)h.appendChild(g.childNodes.item(0));g.parentNode.insertBefore(h,g),g.parentNode.removeChild(g)}return c.innerHTML}},function(a){"use strict";var b,c;c=function(){function a(a){var b=a,c=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();return a&&"object"===c&&"undefined"!=typeof a.toArray&&(b=a.toArray()),b}function b(a){var b=[],c=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();if(a&&("htmlcollection"===c||"nodelist"===c||"object"===c&&"undefined"!=typeof a.length&&"undefined"!=typeof a[0]&&"undefined"==typeof a.nodeType)){for(var d=0;d<a.length;b.push(a[d]),d++);a=b}return SCAYT.jquip(a)}this.find=function(c,d){var e;return e="undefined"==typeof d?b(c):b(d).find(c),a(e)},this.parent=function(c,d){var e=b(c).parent(d);return a(e)},this.parents=function(c,d){var e=b(c).parents(d);return a(e)},this.is=function(c,d){var e=b(c).is(d);return a(e)},this.each=function(a,c){b(a).each(c)},this.filter=function(c,d){var e=b(c).filter(d);return a(e)},this.create=function(b){return a(SCAYT.jquip(b))},this.remove=function(b){return a(SCAYT.jquip(b).remove())},this.appendTo=function(b,c){return a(SCAYT.jquip(b).appendTo(SCAYT.jquip(c)))},this.prependTo=function(b,c){return a(SCAYT.jquip(b).prependTo(SCAYT.jquip(c)))},this.append=function(b,c){return a(SCAYT.jquip(b).append(SCAYT.jquip(c)))},this.prepend=function(b,c){return a(SCAYT.jquip(b).prepend(SCAYT.jquip(c)))},this.insertAfter=function(b,c){return a(SCAYT.jquip(b).insertAfter(SCAYT.jquip(c)))},this.attr=function(b,c,d){return a(SCAYT.jquip(b).attr(c,d))},this.removeAttr=function(b,c){return a(SCAYT.jquip(b).removeAttr(c))},this.addClass=function(b,c){return a(SCAYT.jquip(b).addClass(c))},this.removeClass=function(b,c){return a(SCAYT.jquip(b).removeClass(c))},this.hasClass=function(b,c){return a(SCAYT.jquip(b).hasClass(c))},this.css=function(b,c){return a(SCAYT.jquip(b).css(c))},this.show=function(b){return a(SCAYT.jquip(b).show())},this.hide=function(b){return a(SCAYT.jquip(b).hide())},this.html=function(b,c){return a(SCAYT.jquip(b).html(c))},this.val=function(b,c){return a(SCAYT.jquip(b).val(c))},this.text=function(b,c){return a(SCAYT.jquip(b).text(c))},this.empty=function(b){return a(SCAYT.jquip(b).empty())},this.domReady=function(a){SCAYT.jquip(a)},this.on=function(a,b,c,d){SCAYT.jquip(b).on(a,c,d)},this.off=function(a,b,c,d){SCAYT.jquip(b).off(a,c,d)},this.one=function(a,b,c){SCAYT.jquip(b).one(a,c)},this.trigger=function(a,b){SCAYT.jquip(b).trigger(a)},this.getEventTarget=function(a){return a.target||(a.target=a.srcElement||document),3===a.target.nodeType&&(a.target=a.target.parentNode),a.target},this.cancelEvent=function(a){return SCAYT.jquip.cancelEvent(a)},this.preventDefault=function(a){SCAYT.jquip.preventDefault(a)},this.focus=function(){var b,c=[];return Array.prototype.push.apply(c,arguments),b=SCAYT.jquip(c.shift()),a(b.focus.apply(b,c))},this.blur=function(){var b,c=[];return Array.prototype.push.apply(c,arguments),b=SCAYT.jquip(c.shift()),a(b.blur.apply(b,c))},this.contextmenu=function(){var b,c=[];return Array.prototype.push.apply(c,arguments),b=SCAYT.jquip(c.shift()),a(b.contextmenu.apply(b,c))},this.proxy=function(a,b){return SCAYT.jquip.proxy(a,b)},this.outerWidth=function(a,b){return SCAYT.jquip(a).outerWidth(b)},this.outerHeight=function(a,b){return SCAYT.jquip(a).outerHeight(b)},this.extend=function(){return SCAYT.jquip.extend.apply(SCAYT.jquip,arguments)}},b=new c;var d={find:function(){return b.find.apply(b,arguments)},parent:function(){return b.parent.apply(b,arguments)},parents:function(){return b.parents.apply(b,arguments)},is:function(){return b.is.apply(b,arguments)},each:function(){b.each.apply(b,arguments)},filter:function(){return b.filter.apply(b,arguments)},create:function(){return b.create.apply(b,arguments)},remove:function(){return b.remove.apply(b,arguments)},appendTo:function(){return b.appendTo.apply(b,arguments)},prependTo:function(){return b.prependTo.apply(b,arguments)},append:function(){return b.append.apply(b,arguments)},prepend:function(){return b.prepend.apply(b,arguments)},insertAfter:function(){return b.insertAfter.apply(b,arguments)},attr:function(){return b.attr.apply(b,arguments)},removeAttr:function(){return b.removeAttr.apply(b,arguments)},addClass:function(){return b.addClass.apply(b,arguments)},removeClass:function(){return b.removeClass.apply(b,arguments)},hasClass:function(){return b.hasClass.apply(b,arguments)},css:function(){return b.css.apply(b,arguments)},show:function(){return b.show.apply(b,arguments)},hide:function(){return b.hide.apply(b,arguments)},html:function(){return b.html.apply(b,arguments)},val:function(){return b.val.apply(b,arguments)},text:function(){return b.text.apply(b,arguments)},empty:function(){return b.empty.apply(b,arguments)},domReady:function(a){b.domReady(a)},on:function(){b.on.apply(b,arguments)},off:function(){b.off.apply(b,arguments)},one:function(){b.one.apply(b,arguments)},trigger:function(){b.trigger.apply(b,arguments)},getEventTarget:function(){return b.getEventTarget.apply(b,arguments)},cancelEvent:function(){return b.cancelEvent.apply(b,arguments)},preventDefault:function(a){b.preventDefault(a)},focus:function(){return b.focus.apply(b,arguments)},blur:function(){return b.blur.apply(b,arguments)},contextmenu:function(){return b.contextmenu.apply(b,arguments)},proxy:function(){return b.proxy.apply(b,arguments)},outerWidth:function(){return b.outerWidth.apply(b,arguments)},outerHeight:function(){return b.outerHeight.apply(b,arguments)},extend:function(){return b.extend.apply(b,arguments)}};a.UILib=d}(SCAYT.prototype),function(a){"use strict";var b=[],c={add:function(a){b.push(a)},remove:function(a){for(var c=0;c<b.length;c++)b[c].getOption("uid")===a&&b.splice(c,1)},notifyAll:function(a,c){for(var d=0;d<b.length;d++)b[d].fire(a,c)},getUniqueId:function(a){return a.id?a.id:"scayt_"+b.length}};a.instanceManager=c}(SCAYT.prototype),function(a){"use strict";var b=a.UILib,c={query:function(a,c){return b.find(c,a)},findScaytChildren:function(a,c,d){return b.find(c+"["+d+"]",a)},findScaytParents:function(a,c,d){return b.parents(a,c+"["+d+"]")},insertAfter:function(a,c){return b.insertAfter(a,c)}};a.DOM=c}(SCAYT.prototype),function(a){"use strict";var b=function(a,b){var c=document,d=c.createElement("script");d.type="text/javascript",d.src=a,d.async=!1,d.onreadystatechange=d.onload=function(){var a=d.readyState;b.done||a&&!/loaded|complete/.test(a)||(b.done=!0,b())},(c.body||c.head).appendChild(d)},c={},d={lang:{},loadLocalization:function(a,d){c[a]=c[a]||{},c[a].loaded||c[a].inProgress||(c[a]={inProgress:!0,loaded:!1},b(d.getOption("localizationPath")+a+"/local.js",function(){c[a]={inProgress:!1,loaded:!0}}))},getLocal:function(a,b){return this.lang[b]&&this.lang[b][a]?this.lang[b][a]:a}};a.Localization=d}(SCAYT.prototype),function(a){"use strict";var b=!1,c=[],d={URL:function(a){a=a||{};var b="",c=a.protocol||"http",d=a.host||"localhost",e=a.port||"80",f=a.path||"",g=[];this.addParameter=function(a,b){return a&&b&&g.push(a+"="+encodeURIComponent(b)),this},this.build=function(){return b="",b+=c+"://",b+=d,b+="80"==e?"/":":"+e+"/",b+=f.replace(/^\/*/,""),b+=g.length>0?"?":"",b+=g.join("&")}},get:function(a,d,e){var f,g="callback"+Math.random().toString(20).substr(2,9),h="SCAYT.prototype.IO.",i=function(a){a&&a.error?(a.message&&console.warn(a.message),e&&e(a)):d&&d(a),f.parentNode.removeChild(f),f&&(f=null);try{delete SCAYT.prototype.IO[g]}catch(b){SCAYT.prototype.IO[g]=void 0}};if(b){for(var j=0;j<c.length;j++)c[j].success&&d(c[j].success),c[j].error&&e(c[j].error);return g}return a.addParameter("callback",h+g),f=document.createElement("script"),f.id=g,f.type="text/javascript",f.src=a.build(),f.onerror=function(){i({error:!0})},document.getElementsByTagName("head")[0].appendChild(f),this[g]=function(a){i(a)},g},ioMockStart:function(a){b=!0,c=a?a:c},ioMockEnd:function(){b=!1}};a.IO=d}(SCAYT.prototype),function(a){"use strict";var b={removePunctuation:function(a,b){return a=a.replace(new RegExp(String.fromCharCode(160),"g")," "),a=a.replace(new RegExp(String.fromCharCode(8203),"g")," "),a=a.replace(new RegExp("["+b.source+"]","g")," "),a=a.replace(/([\.\-\']{2,})/g,"#$1#").replace(/#[\.\-\']|[\.\-\']#/g," "),a=a.replace(new RegExp(" [-'.]|[-'.] ","g"),"  "),a=a.replace(new RegExp("^[-'.]|[-'.]$","g")," "),a=a.replace(/[\r\n(\r\n)\<\>\\\/\=\"]/g," ")},removeSpecialCharacters:function(a){return a=a.replace(new RegExp(String.fromCharCode(65279),"g"),"")},objectIsEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeGlobal:function(a,b){b=b||window;try{delete b.variable}catch(c){b.variable=void 0}},sortRangesForMurkup:function(a,b){var c=b.compareBoundaryPoints(0,a);return c},getCurrentDocument:function(a){var b;return b="iframe"==a.nodeName.toLowerCase()?a.contentWindow.document:document},fixRangeBoundaryPoints:function(a){var b={startNode:a.startContainer(),endNode:a.endContainer(),startOffset:a.startOffset(),endOffset:a.endOffset()};if(b.startNode.parentNode!=b.endNode.parentNode){var c=a.commonAncestorContainer(),d=b.startNode;if(0===b.startOffset){for(;d.parentNode!=c&&d.parentNode.firstChild==d;)d=d.parentNode;b.startBeforeNode=d}if(b.startNode=d,d=b.endNode,d.length==b.endOffset){for(;d.parentNode!=c&&d.parentNode.lastChild==d;)d=d.parentNode;b.endAfterNode=d}}return a.setStart(b.startNode,b.startOffset),a.setEnd(b.endNode,b.endOffset),b.startBeforeNode&&a.setStartBefore(b.startBeforeNode),b.endAfterNode&&a.setEndAfter(b.endAfterNode),a},arrayFilter:function(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=[],d=arguments[1],e=0;b>e;e++)if(e in this){var f=this[e];a.call(d,f,e,this)&&c.push(f)}return c},indexOf:function(a){function b(a){if(null==this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if(0===e)return-1;if(b=0,arguments.length>1&&(b=Number(arguments[1]),b!=b?b=0:0!=b&&1/0!=b&&b!=-1/0&&(b=(b>0||-1)*Math.floor(Math.abs(b)))),b>=e)return-1;for(c=b>=0?b:Math.max(e-Math.abs(b),0);e>c;c++)if(c in d&&d[c]===a)return c;return-1}var c,d=Array.prototype.slice.apply(arguments);return d.shift(),c="[object Array]"!==Object.prototype.toString.call(a)||Array.prototype.indexOf?Array.prototype.indexOf.apply(a,d):b.apply(a,d)},isScaytNode:function(a){var b=!1;return a&&(b=a.getAttribute&&a.getAttribute("data-scayt-word")?!0:!1),b},inArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},extendOptions:function(a,b){for(var c in b)a[c]=b[c]},getUrl:function(a,b){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=b+a),a},is:function(a,b){var c=Object.prototype.toString.call(a).slice(8,-1);return void 0!==a&&null!==a&&c===b},getLocationInfo:function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol.replace(/:/,""),host:b.host.split(":")[0],port:"0"==b.port?"80":b.port,pathname:b.pathname.replace(/^\//,"")}},getKeys:Object.keys||function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},browser:function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:a.indexOf("trident/")>-1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,mobile:a.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(a)};return c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie,c.webkit&&(a.indexOf("chrome")>-1?c.chrome=!0:c.safari=!0),c}()};a.Utils=b}(SCAYT.prototype),function(a){"use strict";var b={},c=function f(a,c){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||f(document.getElementById(a).innerHTML.replace(/\r\n/,""));return c?d(c):d},d=a.UILib,e={create:function(a,b){var c;document.getElementById(a)||(c=document.createElement("script"),c.type="text/html",c.id=a,c.text=b,d.appendTo(c,"body"))},remove:function(a){d.remove("body #"+a)},render:function(a,b){return c(a,b)}};a.Template=e}(SCAYT.prototype),function(a){"use strict";var b={separator:"<$>",getDataType:function(a){var b;return b="undefined"==typeof a?"undefined":null===a?"null":Object.prototype.toString.call(a).slice(8,-1)},convertDataToString:function(a){var b,c=this.getDataType(a).toLowerCase();return b=c+this.separator+a},restoreDataFromString:function(a){var b,c,d=a;if(a=this.backCompatibility(a),"string"==typeof a)switch(c=a.indexOf(this.separator),b=a.substring(0,c),d=a.substring(c+this.separator.length),b){case"boolean":d="true"===d;break;case"number":d=parseFloat(d);break;case"array":d=""===d?[]:d.split(",");break;case"null":d=null;break;case"undefined":d=void 0}return d},backCompatibility:function(a){var b,c,d=a;return"string"==typeof a&&(c=a.indexOf(this.separator),0>c&&(b=parseFloat(a),isNaN(b)&&("["===a[0]&&"]"===a[a.length-1]?(a=a.replace("[",""),a=a.replace("]",""),b=""===a?[]:a.split(",")):b="true"===a||"false"===a?"true"===a:a),d=this.convertDataToString(b))),d}},c={get:function(a){var c=b.restoreDataFromString(window.localStorage.getItem(a));return c},set:function(a,c){var d=b.convertDataToString(c);window.localStorage.setItem(a,d)},del:function(a){window.localStorage.removeItem(a)},clear:function(){window.localStorage.clear()}},d={expiration:function(){return 31622400}(),get:function(a){var c=b.restoreDataFromString(this.getCookie(a));return c},set:function(a,c){var d=b.convertDataToString(c);this.setCookie(a,d,{expires:this.expiration})},del:function(a){this.deleteCookie(a)},getCookie:function(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):void 0},setCookie:function(a,b,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1e3*d),d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString()),b=encodeURIComponent(b);var f=a+"="+b;for(var g in c){var h=c[g];f+="; "+g,h!==!0&&(f+="="+h)}document.cookie=f},deleteCookie:function(a){this.setCookie(a,null,{expires:-1})},clear:function(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var c=a[b],d=c.indexOf("="),e=d>-1?c.substr(0,d):c;this.deleteCookie(e)}}},e=window.localStorage?c:d,f={getData:function(a){return e.get(a)},setData:function(a,b){e.set(a,b)},deleteData:function(a){e.del(a)},clear:function(){e.clear()}};a.DataStorage=f}(SCAYT.prototype),SCAYT.RangeCreator=function(a,b){this.name=a,this.sandbox=b},SCAYT.RangeCreator.prototype={init:function(){this.documentContainer=this.sandbox.getOption("documentContainer"),this.blockElementsRegex=this.sandbox.getOption("blockElementsRegex"),this.ignoreElementsRegex=this.sandbox.getOption("ignoreElementsRegex"),this.libAdapter=SCAYT.RangeCreator.RangyAdapter},createRange:function(){return new SCAYT.RangeCreator.Range(new this.libAdapter(this.documentContainer,this.blockElementsRegex,this.ignoreElementsRegex))},getSelection:function(){return new SCAYT.RangeCreator.Selection(new this.libAdapter(this.documentContainer,this.blockElementsRegex,this.ignoreElementsRegex))},getSelectionManager:function(){return new SCAYT.RangeCreator.SelectionManager(new this.libAdapter(this.documentContainer,this.blockElementsRegex,this.ignoreElementsRegex))},comparisonType:{START_TO_START:0,START_TO_END:1,END_TO_START:3,END_TO_END:2}},SCAYT.RangeCreator.Range=function(a){var b=a.range;b.createRange(),this.collapsed=function(){return b.collapsed()},this.commonAncestorContainer=function(){return b.commonAncestorContainer()},this.endContainer=function(){return b.endContainer()},this.endOffset=function(){return b.endOffset()},this.startContainer=function(){return b.startContainer()},this.startOffset=function(){return b.startOffset()},this.setStart=function(a,c){return b.setStart(a,c)},this.setEnd=function(a,c){return b.setEnd(a,c)},this.setStartBefore=function(a){return b.setStartBefore(a)},this.setStartAfter=function(a){return b.setStartAfter(a)},this.setEndBefore=function(a){return b.setEndBefore(a)},this.setEndAfter=function(a){return b.setEndAfter(a)},this.selectNode=function(a){return b.selectNode(a)},this.selectNodeContents=function(a){return b.selectNodeContents(a)},this.collapse=function(a){return b.collapse(a)},this.cloneContents=function(){return b.cloneContents()},this.deleteContents=function(){return b.deleteContents()},this.extractContents=function(){return b.extractContents()},this.insertNode=function(a){return b.insertNode(a)},this.surroundContents=function(a){return b.surroundContents(a)},this.compareBoundaryPoints=function(a,b){return b.compareBoundaryPoints(a,b)},this.cloneRange=function(){return b.cloneRange()},this.detach=function(){return b.detach()},this.toString=function(){return b.toString()},this.createContextualFragment=function(a){return b.createContextualFragment(a)},this.move=function(a,c,d){return b.move(a,c,d)},this.expand=function(a,c){return b.expand(a,c)}},SCAYT.RangeCreator.Selection=function(a){var b=a.selection;b.getSelection(),this.rangeCount=function(){return b.rangeCount()},this.getRangeAt=function(a){return b.getRangeAt(a)},this.removeAllRanges=function(){return b.removeAllRanges()},this.addRange=function(a){return b.addRange(a)},this.anchorNode=function(){return b.anchorNode()},this.move=function(a,c,d){return b.move(a,c,d)},this.expand=function(a,c){return b.expand(a,c)}},SCAYT.RangeCreator.SelectionManager=function(a){var b=a.selectionManager;return{saveSelection:function(){return b.saveSelection()},restoreSelection:function(a){return b.restoreSelection(a)}}},SCAYT.RangeCreator.SelectionManager.prototype={},SCAYT.RangeCreator.RangyAdapter=function(a,b,c){var d=SCAYT.prototype.UILib;SCAYT.RangeCreator.Lib=SCAYT.RangeCreator.Lib||SCAYT.rangy||window.rangy,SCAYT.RangeCreator.Lib.initialized===!1&&SCAYT.RangeCreator.Lib.init();var e,f=null;return{range:{createRange:function(){return e=SCAYT.RangeCreator.Lib.createRange(a)},collapsed:function(){return e.collapsed},commonAncestorContainer:function(){return e.commonAncestorContainer},endContainer:function(){return e.endContainer},endOffset:function(){return e.endOffset},startContainer:function(){return e.startContainer},startOffset:function(){return e.startOffset},setStart:function(a,b){return e.setStart(a,b)},setEnd:function(a,b){return e.setEnd(a,b)},setStartBefore:function(a){return e.setStartBefore(a)},setStartAfter:function(a){return e.setStartAfter(a)},setEndBefore:function(a){return e.setEndBefore(a)},setEndAfter:function(a){return e.setEndAfter(a)},selectNode:function(a){return e.selectNode(a)},selectNodeContents:function(a){return e.selectNodeContents(a)},collapse:function(a){return e.collapse(a)},cloneContents:function(){return e.cloneContents()},deleteContents:function(){return e.deleteContents()},extractContents:function(){return e.extractContents()},insertNode:function(a){return e.insertNode(a)},surroundContents:function(a){return e.surroundContents(a)},compareBoundaryPoints:function(b,c){var d=SCAYT.RangeCreator.Lib.createRange(a);return d.setStart(c.startContainer(),c.startOffset()),d.setEnd(c.endContainer(),c.endOffset()),e.compareBoundaryPoints(b,d)},cloneRange:function(){var d=new SCAYT.RangeCreator.Range(new SCAYT.RangeCreator.RangyAdapter(a,b,c));return d.setStart(this.startContainer(),this.startOffset()),d.setEnd(this.endContainer(),this.endOffset()),d},detach:function(){return e.detach()},toString:function(){for(var a="",d=e.cloneContents(),f=[d],g=f.shift();g;){switch(g.nodeType){case 3:a+=g.nodeValue;break;case 1:case 11:if(g.nodeName.match(c))a+=" ";else{for(var h=0;h<g.childNodes.length;h++)f.splice(h,0,g.childNodes[h]);g.nodeName.match(b)&&(f.length>g.childNodes.length&&f.splice(h,0,document.createTextNode(" ")),a.length>0&&" "!=a[a.length-1]&&f.splice(0,0,document.createTextNode(" ")))}}g=f.shift()}return a},createContextualFragment:function(a){return e.createContextualFragment(a)},move:function(a,b,c){return e.move(a,b,c)},expand:function(a,b){return e.expand(a,b)}},selection:{getSelection:function(){return f="iframe"==a.nodeName.toLowerCase()?SCAYT.RangeCreator.Lib.getSelection(a):SCAYT.RangeCreator.Lib.getSelection()},rangeCount:function(){return f.rangeCount},getRangeAt:function(d){var e=f.getRangeAt(d),g=new SCAYT.RangeCreator.Range(new SCAYT.RangeCreator.RangyAdapter(a,b,c));return g.setStart(e.startContainer,e.startOffset),g.setEnd(e.endContainer,e.endOffset),g},removeAllRanges:function(){return f.removeAllRanges()},addRange:function(b){var c=SCAYT.RangeCreator.Lib.createRange(a);return c.setStart(b.startContainer(),b.startOffset()),c.setEnd(b.endContainer(),b.endOffset()),f.addRange(c)},anchorNode:function(){return f.anchorNode},move:function(a,b,c){return f.move(a,b,c)},expand:function(a,b){return f.expand(a,b)}},selectionManager:{saveSelection:function(){var b;try{d.is(a,":visible")&&(b="iframe"==a.nodeName.toLowerCase()?SCAYT.RangeCreator.Lib.saveSelection(a):SCAYT.RangeCreator.Lib.saveSelection())}catch(c){}return b},restoreSelection:function(a){return a?SCAYT.RangeCreator.Lib.restoreSelection(a,!0):!1}}}},SCAYT.RangeCreator.TestAdapter=function(){return SCAYT.RangeCreator.Lib=SCAYT.RangeCreator.Lib||window.TestLib,SCAYT.Utils.removeGlobal(window.TestLib),{createRange:function(){return SCAYT.RangeCreator.Lib.createRange()},selectNodeContents:function(a){return SCAYT.RangeCreator.Lib.selectNodeContents(a)},collapse:function(a){return SCAYT.RangeCreator.Lib.collapse(a)},createContextualFragment:function(a){return SCAYT.RangeCreator.Lib.createContextualFragment(a)},insertNode:function(a){return SCAYT.RangeCreator.Lib.insertNode(a)}}},SCAYT.Communication=function(a,b){this.name=a,this.sandbox=b,this.events={},SCAYT.Communication.Signal=SCAYT.Communication.Signal||SCAYT.signals.Signal},SCAYT.Communication.prototype={init:function(){for(var a=["appCreated","appStarted","startSpellCheck","appReady","keypress","focus","blur","moduleStarted","calculateWords","dictionaryChanged","selectionIsChanged","collectWords","wordsCollected","misspelledWordsFound","replaceWord","markupWords","unmurkupWord_test","removeMarkupInNode","getSuggestionsList","suggestionListSend","ignoreWord","ignoreAllWords","removeMarkupInDocument","addEventHandler","removeEventHandler","removeAllEventHandlers","removeMarkupFromWords","removeMarkupInSelectionNode","taskEnded","spellCheckStarted","spellCheckEnded","showBanner","hideBanner","toggleBookmark","moveToBookmark","defaultTextchanged","backgroundColorChanged","paste","openWSCwindow","documentReadyForSpelling","suggestionListRendered","commitOptions","getUserDictionaryName","createUserDictionary","renameUserDictionary","restoreUserDictionary","removeUserDictionary","setUserDictionaryName","addWordToUserDictionary","userDictionaryChanged","userDictionaryStateChanged","userDictionaryStateRestored"],b=0;b<a.length;b++){var c=a[b];
this.events[c]=this.createSignal()}},createSignal:function(){return new SCAYT.Communication.Signal},fire:function(a,b,c){this.events[b].dispatch(c)},subscribe:function(a,b,c,d,e){e=e||0,this.events[b].add(c,d,e)},unsubscribe:function(a,b,c){c||this.events[b].removeAll()}},SCAYT.Deferred=function(a,b){this.name=a,this.sandbox=b,this.tasks={},this.taskCount=0},SCAYT.Deferred.prototype={init:function(){this.sandbox.subscribe("taskEnded",function(a){this.taskEndedHandler(a.taskName)},this)},taskEndedHandler:function(a){this.unregister(a),0===this.taskCount&&this.sandbox.fire("spellCheckEnded",{})},register:function(a,b){return 0===this.taskCount&&this.sandbox.fire("spellCheckStarted",{}),b.single&&(this.unregister(a),b.collection=["single"]),this.tasks[a]?this.tasks[a].extendCollection(b.collection):(this.tasks[a]=new SCAYT.Deferred.Task(a,b,this.sandbox),this.taskCount++,this.tasks[a].startTask()),this.tasks[a]},unregister:function(a){this.tasks[a]&&(this.tasks[a].timeout&&(clearTimeout(this.tasks[a].timeout),this.tasks[a].timeout=null),this.taskCount--,delete this.tasks[a])},unregisterAll:function(){for(var a in this.tasks)this.tasks.hasOwnProperty(a)&&this.unregister(a)}},SCAYT.Deferred.Task=function(a,b,c){function d(a){return function(){a&&a.apply(this,arguments),this.endTask()}}var e=this;b=b||{},this.name=a,this.single=b.single||!1,this.collection=[].concat(b.collection||[]),this.delay=b.delay||0,this.partialItemsCount=b.partialItemsCount||1,this.deferredFunction=d(b.deferredFunction),this.timeout=void 0,this.getPartialItems=function(){return this.collection.splice(0,this.partialItemsCount||1)},this.runDeferredFunction=function(a){var b=this.deferredFunction.call(this,a);return b},this.extendCollection=function(a){var b=[0,0];b.push.apply(b,a),this.collection.splice.apply(this.collection,b)},this.startTask=function(){this.timeout=setTimeout(function(){var a=e.getPartialItems();e.runDeferredFunction(a)},this.delay)},this.endTask=function(){this.timeout=null,this.collection.length>0?this.startTask():c.fire("taskEnded",{taskName:this.name})}},function(a){"use strict";var b=window.console||{},c=window.JSON||{},d=["log","warn","info","debug"],e=a.Utils.browser;c.stringify=c.stringify||function(){return arguments};for(var f=0;f<d.length;f++)b[d[f]]=b[d[f]]||function(){};var g=!1,h={isON:function(a){a=a||!1,g=a?!0:/scaytDebug\b/.test(location.hash)},isIE:e.ie,log:function(a){var d=a||{},e=void 0;g&&(e="object"==typeof d?[d.name,":: "+d.msg,d.data]:[d],this.isIE?(e=[d.name,":: "+d.msg,c.stringify(d.data,null,"")],e=e.join(" "),b.log(e)):b.log.apply(b,e))}};a.logger=h}(SCAYT.prototype),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b;return this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f=this._indexOfListener(a,d);if(-1!==f){if(a=this._bindings[f],a.isOnce()!==c)throw Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else a=new b(this,a,c,d,e),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,a.signals=e}(SCAYT||this),function(){var a=SCAYT.rangy=function(){function a(a,b){var c=typeof a[b];return c==m||!(c!=l||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=l||!a[b])}function c(a,b){return typeof a[b]!=n}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&s(a,r)&&u(a,q)}function f(a,b){b?window.alert(a):typeof window.console!=n&&typeof window.console.log!=n&&window.console.log(a)}function g(a){v.initialized=!0,v.supported=!1,f("Rangy is not supported on this page in your browser. Reason: "+a,v.config.alertOnFail)}function h(a){f("Rangy warning: "+a,v.config.alertOnWarn)}function i(){if(!v.initialized){var c,d=!1,f=!1;a(document,"createRange")&&(c=document.createRange(),s(c,p)&&u(c,o)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];if(!h||"body"!=h.nodeName.toLowerCase())return g("No body element found"),void 0;if(h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(f=!0)),!d&&!f)return g("Neither Range nor TextRange are available"),void 0;v.initialized=!0,v.features={implementsDomRange:d,implementsTextRange:f};for(var i=x.concat(w),j=0,k=i.length;k>j;++j)try{i[j](v)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Rangy init listener threw an exception. Continuing.",l)}}}function j(a){a=a||window,i();for(var b=0,c=y.length;c>b;++b)y[b](a)}function k(a){this.name=a,this.initialized=!1,this.supported=!1}var l="object",m="function",n="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],q=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],r=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],s=d(a),t=d(b),u=d(c),v={version:"1.3alpha.681",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:s,areHostObjects:t,areHostProperties:u,isTextRange:e},features:{},modules:{},config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1}};v.fail=g,v.warn=h,{}.hasOwnProperty?v.util.extend=function(a,b,c){var d,e;for(var f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],c&&null!==d&&"object"==typeof d&&null!==e&&"object"==typeof e&&v.util.extend(d,e,!0),a[f]=e);return a}:g("hasOwnProperty not supported");var w=[],x=[];v.init=i,v.addInitListener=function(a){v.initialized?a(v):w.push(a)};var y=[];return v.addCreateMissingNativeApiListener=function(a){y.push(a)},v.createMissingNativeApi=j,k.prototype={fail:function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},warn:function(a){v.warn("Module "+this.name+": "+a)},deprecationNotice:function(a,b){v.warn("DEPRECATED: "+a+" in module "+this.name+"is deprecated. Please use "+b+" instead")},createError:function(a){return new Error("Error in Rangy "+this.name+" module: "+a)}},v.createModule=function(a,b){var c=new k(a);v.modules[a]=c,x.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},v.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=v.modules[c],!(b&&b instanceof k))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}},typeof window==n?(g("No window found"),void 0):typeof document==n?(g("No document found"),void 0):v}();a.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==D||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(H(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b){return h(a,b,!0)}function j(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function k(a){var b=a.nodeType;return 3==b||4==b||8==b}function l(a){if(!a)return!1;var b=a.nodeType;return 3==b||8==b}function m(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function n(a,b,c){var d=a.cloneNode(!1);if(d.deleteData(0,b),a.deleteData(b,a.length-b),m(d,a),c)for(var f,g=0;f=c[g++];)f.node==a&&f.offset>b?(f.node=d,f.offset-=b):f.node==a.parentNode&&f.offset>e(a)&&++f.offset;return d}function o(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=D)return a.ownerDocument;if(typeof a.document!=D)return a.document;if(a.parentNode)return o(a.parentNode);throw b.createError("getDocument: no document found for node")}function p(a){var c=o(a);if(typeof c.defaultView!=D)return c.defaultView;if(typeof c.parentWindow!=D)return c.parentWindow;throw b.createError("Cannot get a window object for node")}function q(a){if(typeof a.contentDocument!=D)return a.contentDocument;if(typeof a.contentWindow!=D)return a.contentWindow.document;throw b.createError("getIframeDocument: No Document object found for iframe element")}function r(a){if(typeof a.contentWindow!=D)return a.contentWindow;if(typeof a.contentDocument!=D)return a.contentDocument.defaultView;throw b.createError("getIframeWindow: No Window object found for iframe element")}function s(a){return E.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function t(a){return a&&E.isHostMethod(a,"setTimeout")&&E.isHostObject(a,"document")}function u(a){var b;return a?E.isHostProperty(a,"nodeType")?b=1==a.nodeType&&"iframe"==a.tagName.toLowerCase()?q(a):o(a):t(a)&&(b=a.document):b=document,b}function v(a){for(var b;b=a.parentNode;)a=b;return a}function w(a,c,d,f){var h,i,k,l,m;if(a==d)return c===f?0:f>c?-1:1;if(h=j(d,a,!0))return c<=e(h)?-1:1;if(h=j(a,d,!0))return e(h)<f?-1:1;if(i=g(a,d),k=a===i?i:j(a,i,!0),l=d===i?i:j(d,i,!0),k===l)throw b.createError("comparePoints got to case 4 and childA and childB are the same!");for(m=i.firstChild;m;){if(m===k)return-1;if(m===l)return 1;m=m.nextSibling}}function x(a){if(!a)return"[No node]";if(k(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function y(a){for(var b,c=o(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function z(a){this.root=a,this._next=a}function A(a){return new z(a)}function B(a,b){this.node=a,this.offset=b}function C(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var D="undefined",E=a.util;E.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),E.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var F=document.createElement("div");E.areHostMethods(F,["insertBefore","appendChild","cloneNode"]||!E.areHostObjects(F,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),E.isHostProperty(F,"innerHTML")||b.fail("Element is missing innerHTML property");var G=document.createTextNode("test");E.areHostMethods(G,["splitText","deleteData","insertData","appendData","cloneNode"]||!E.areHostObjects(F,["previousSibling","nextSibling","childNodes","parentNode"])||!E.areHostProperties(G,["data"]))||b.fail("Incomplete Text Node implementation");var H=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};z.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},B.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},C.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},C.prototype.toString=function(){return this.message},a.dom={arrayContains:H,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,isOrIsAncestorOf:i,getClosestAncestorIn:j,isCharacterDataNode:k,isTextOrCommentNode:l,insertAfter:m,splitDataNode:n,getDocument:o,getWindow:p,getIframeWindow:r,getIframeDocument:q,getBody:s,isWindow:t,getContentDocument:u,getRootContainer:v,comparePoints:w,inspectNode:x,fragmentFromNodeChildren:y,createIterator:A,DomPosition:B},a.DOMException=C}),a.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(L.isOrIsAncestorOf(a,b.startContainer)||L.isOrIsAncestorOf(a,b.endContainer))}function c(a){return L.getDocument(a.startContainer)}function d(a){return new N(a.parentNode,L.getNodeIndex(a))}function e(a){return new N(a.parentNode,L.getNodeIndex(a)+1)}function f(a,b,c){var d=11==a.nodeType?a.firstChild:a;return L.isCharacterDataNode(b)?c==b.length?L.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:L.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function g(a,b,d){if(A(a),A(b),c(b)!=c(a))throw new O("WRONG_DOCUMENT_ERR");var e=L.comparePoints(a.startContainer,a.startOffset,b.endContainer,b.endOffset),f=L.comparePoints(a.endContainer,a.endOffset,b.startContainer,b.startOffset);return d?0>=e&&f>=0:0>e&&f>0}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new O("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return c.stop=!0,void 0;if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=L.createIterator(f);e=d.next();)if(b(e)===!1)return c.stop=!0,void 0}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new O("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+L.inspectNode(a.startContainer)+":"+a.startOffset+", "+L.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&L.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||L.isCharacterDataNode(this.sc)?L.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||L.isCharacterDataNode(this.ec)?L.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,L.arrayContains(a,d))return e;e=e.parentNode}return null}}function q(a,b){if(X(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function r(a){if(!a.startContainer)throw new O("INVALID_STATE_ERR")}function s(a,b){if(!L.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function t(a,b){if(0>b||b>(L.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new O("INDEX_SIZE_ERR")}function u(a,b){if(V(a,!0)!==V(b,!0))throw new O("WRONG_DOCUMENT_ERR")}function v(a){if(W(a,!0))throw new O("NO_MODIFICATION_ALLOWED_ERR")}function w(a,b){if(!a)throw new O(b)}function x(a){return!L.arrayContains(Q,a.nodeType)&&!V(a,!0)}function y(a,b){return b<=(L.isCharacterDataNode(a)?a.length:a.childNodes.length)}function z(a){return!!a.startContainer&&!!a.endContainer&&!x(a.startContainer)&&!x(a.endContainer)&&y(a.startContainer,a.startOffset)&&y(a.endContainer,a.endOffset)}function A(a){if(r(a),!z(a))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function B(a,b){A(a);var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset,g=c===e;L.isCharacterDataNode(e)&&f>0&&f<e.length&&L.splitDataNode(e,f,b),L.isCharacterDataNode(c)&&d>0&&d<c.length&&(c=L.splitDataNode(c,d,b),g?(f-=d,e=c):e==c.parentNode&&f>=L.getNodeIndex(c)&&f++,d=0),a.setStartAndEnd(c,d,e,f)}function C(){}function D(a){a.START_TO_START=bb,a.START_TO_END=cb,a.END_TO_END=db,a.END_TO_START=eb,a.NODE_BEFORE=fb,a.NODE_AFTER=gb,a.NODE_BEFORE_AND_AFTER=hb,a.NODE_INSIDE=ib}function E(a){D(a),D(a.prototype)}function F(a,b){return function(){A(this);var c,d,f=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);f!==h&&(c=L.getClosestAncestorIn(f,h,!0),d=e(c),f=d.node,g=d.offset),i(j,v),j.reset();var k=a(j);return j.detach(),b(this,f,g,f,g),k}}function G(a,c,f){function g(a,b){return function(c){r(this),s(c,P),s(U(c),Q);var f=(a?d:e)(c);(b?h:i)(this,f.node,f.offset)}}function h(a,b,d){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||d!==a.startOffset)&&((U(b)!=U(e)||1==L.comparePoints(b,d,e,f))&&(e=b,f=d),c(a,b,d,e,f))}function i(a,b,d){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||d!==a.endOffset)&&((U(b)!=U(e)||-1==L.comparePoints(b,d,e,f))&&(e=b,f=d),c(a,e,f,b,d))}a.prototype=new C,M.extend(a.prototype,{setStart:function(a,b){r(this),q(a,!0),t(a,b),h(this,a,b)},setEnd:function(a,b){r(this),q(a,!0),t(a,b),i(this,a,b)},setStartAndEnd:function(){r(this);var a=arguments,b=a[0],d=a[1],e=b,f=d;switch(a.length){case 3:f=a[2];break;case 4:e=a[2],f=a[3]}c(this,b,d,e,f)},setStartBefore:g(!0,!0),setStartAfter:g(!1,!0),setEndBefore:g(!0,!1),setEndAfter:g(!1,!1),collapse:function(a){A(this),a?c(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):c(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){r(this),q(a,!0),c(this,a,0,a,L.getNodeLength(a))},selectNode:function(a){r(this),q(a,!1),s(a,P);var b=d(a),f=e(a);c(this,b.node,b.offset,f.node,f.offset)},extractContents:F(k,c),deleteContents:F(j,c),canSurroundContents:function(){A(this),v(this.startContainer),v(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){f(this)},splitBoundaries:function(){B(this)},splitBoundariesPreservingPositions:function(a){B(this,a)},normalizeBoundaries:function(){A(this);var a=this.startContainer,b=this.startOffset,d=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(d=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(c){var f=c.previousSibling;if(f&&f.nodeType==c.nodeType){a=c;var g=c.length;if(b=f.length,c.insertData(0,f.data),f.parentNode.removeChild(f),a==d)e+=b,d=a;else if(d==c.parentNode){var h=L.getNodeIndex(c);e==h?(d=c,e=g):e>h&&e--}}},h=!0;if(L.isCharacterDataNode(d))d.length==e&&f(d);else{if(e>0){var i=d.childNodes[e-1];i&&L.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(L.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&L.isCharacterDataNode(j)&&g(j)}}else a=d,b=e;c(this,a,b,d,e)},collapseToPoint:function(a,b){r(this),q(a,!0),t(a,b),this.setStartAndEnd(a,b)}}),E(a)}function H(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:L.getCommonAncestor(a.startContainer,a.endContainer)}function I(a,b,c,d,e){a.startContainer=b,a.startOffset=c,a.endContainer=d,a.endOffset=e,H(a)}function J(a){r(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null}function K(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,H(this)}a.requireModules(["DomUtil"]);var L=a.dom,M=a.util,N=L.DomPosition,O=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,L.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!L.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse(!1);else{a=new K(c(this.range));var b=this._current,d=b,e=0,f=b,g=L.getNodeLength(b);L.isOrIsAncestorOf(b,this.sc)&&(d=this.sc,e=this.so),L.isOrIsAncestorOf(b,this.ec)&&(f=this.ec,g=this.eo),I(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message};var P=[1,3,4,5,7,8,10],Q=[2,9,11],R=[5,6,10,12],S=[1,3,4,5,7,8,10,11],T=[1,3,4,5,7,8],U=L.getRootContainer,V=p([9,11]),W=p(R),X=p([6,10,12]),Y=document.createElement("style"),Z=!1;try{Y.innerHTML="<b>x</b>",Z=3==Y.firstChild.nodeType}catch($){}a.features.htmlParsingConforms=Z;var _=Z?function(a){var b=this.startContainer,c=L.getDocument(b);if(!b)throw new O("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:L.isCharacterDataNode(b)&&(d=L.parentElement(b)),d=null===d||"HTML"==d.nodeName&&L.isHtmlNamespace(L.getDocument(d).documentElement)&&L.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,L.fragmentFromNodeChildren(d)}:function(a){r(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,L.fragmentFromNodeChildren(d)},ab=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],bb=0,cb=1,db=2,eb=3,fb=0,gb=1,hb=2,ib=3;C.prototype={compareBoundaryPoints:function(a,b){A(this),u(this.startContainer,b.startContainer);var c,d,e,f,g=a==eb||a==bb?"start":"end",h=a==cb||a==bb?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],L.comparePoints(c,d,e,f)},insertNode:function(a){if(A(this),s(a,S),v(this.startContainer),L.isOrIsAncestorOf(a,this.startContainer))throw new O("HIERARCHY_REQUEST_ERR");var b=f(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){A(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){A(this),v(this.startContainer),v(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(s(a,T),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);f(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){A(this);for(var a,b=new K(c(this)),d=ab.length;d--;)a=ab[d],b[a]=this[a];return b},toString:function(){A(this);var a=this.startContainer;if(a===this.endContainer&&L.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){A(this);var b=a.parentNode,c=L.getNodeIndex(a);if(!b)throw new O("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?hb:fb:e>0?gb:ib},comparePoint:function(a,b){return A(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:L.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:_,toHtml:function(){A(this);var a=this.commonAncestorContainer.parentNode.cloneNode(!1);return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(A(this),w(a,"NOT_FOUND_ERR"),L.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=L.getNodeIndex(a);w(d,"NOT_FOUND_ERR");var f=L.comparePoints(d,e,this.endContainer,this.endOffset),g=L.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return A(this),w(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&L.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a){return g(this,a,!1)},intersectsOrTouchesRange:function(a){return g(this,a,!0)},intersection:function(a){if(this.intersectsRange(a)){var b=L.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=L.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsOrTouchesRange(a)){var b=this.cloneRange();return-1==L.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==L.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ib},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,L.getNodeLength(a))<=0},containsRange:function(a){var b=this.intersection(a);return null!==b&&a.equals(b)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},getNodes:function(a,b){return A(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){r(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){r(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return K.rangesEqual(this,a)},isValid:function(){return z(this)},inspect:function(){return m(this)}},G(K,I,J),a.rangePrototype=C.prototype,M.extend(K,{rangeProperties:ab,RangeIterator:n,copyComparisonConstants:E,createPrototypeRange:G,inspect:m,getRangeDocument:c,rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}}),a.DomRange=K,a.RangeException=o}),a.createModule("WrappedRange",function(a,b){function c(a,c){if(a=i.getContentDocument(a),!a)throw b.createError(c+"(): Parameter must be a Document or other DOM node, or a Window object");return a}function d(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:i.getCommonAncestor(d,e);return f==b?f:i.getCommonAncestor(b,f)}function e(a){return 0==a.compareEndPoints("StartToEnd",a)}function f(a,b,c,d,e){var f=a.duplicate();f.collapse(c);var g=f.parentElement();if(i.isOrIsAncestorOf(b,g)||(g=b),!g.canHaveHTML)return new k(g.parentNode,i.getNodeIndex(g));var h=i.getDocument(g).createElement("span");h.parentNode&&h.parentNode.removeChild(h);for(var j,l,m,n,o,p=c?"StartToStart":"StartToEnd",q=e&&e.containerElement==g?e.nodeIndex:0,r=g.childNodes.length,s=r,t=s;;){if(t==r?g.appendChild(h):g.insertBefore(h,g.childNodes[t]),f.moveToElementText(h),j=f.compareEndPoints(p,a),0==j||q==s)break;if(-1==j){if(s==q+1)break;q=t}else s=s==q+1?q:t;t=Math.floor((q+s)/2),g.removeChild(h)}if(o=h.nextSibling,-1==j&&o&&i.isCharacterDataNode(o)){f.setEndPoint(c?"EndToStart":"EndToEnd",a);var u;if(/[\r\n]/.test(o.data)){var v=f.duplicate(),w=v.text.replace(/\r\n/g,"\r").length;for(u=v.moveStart("character",w);-1==(j=v.compareEndPoints("StartToEnd",v));)u++,v.moveStart("character",1)}else u=f.text.length;n=new k(o,u)}else l=(d||!c)&&h.previousSibling,m=(d||c)&&h.nextSibling,n=m&&i.isCharacterDataNode(m)?new k(m,0):l&&i.isCharacterDataNode(l)?new k(l,l.data.length):new k(g,i.getNodeIndex(h));return h.parentNode.removeChild(h),{boundaryPosition:n,nodeInfo:{nodeIndex:t,containerElement:g}}}function g(a,b){var c,d,e,f,g=a.offset,h=i.getDocument(a.node),j=h.body.createTextRange(),k=i.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=g<f.length?f[g]:null,d=a.node),e=h.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",g),j}a.requireModules(["DomUtil","DomRange"]);var h,i=a.dom,j=a.util,k=i.DomPosition,l=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){h=function(a){this.textRange=a,this.refresh()
},h.prototype=new l(document),h.prototype.refresh=function(){var a,b,c,g=d(this.textRange);e(this.textRange)?b=a=f(this.textRange,g,!0,!0).boundaryPosition:(c=f(this.textRange,g,!0,!1),a=c.boundaryPosition,b=f(this.textRange,g,!1,!1,c.nodeInfo).boundaryPosition),this.setStart(a.node,a.offset),this.setEnd(b.node,b.offset)},l.copyComparisonConstants(h);var m=function(){return this}();"undefined"==typeof m.Range&&(m.Range=h),a.createNativeRange=function(a){return a=c(a,"createNativeRange"),a.body.createTextRange()}}}else!function(){function a(a){for(var b,c=g.length;c--;)b=g[c],a[b]=a.nativeRange[b];a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e,h=!a.equals(a.nativeRange);(f||g||h)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=g.length;c--;)b=g[c],a[b]=null}var e,f,g=l.rangeProperties;h=function(c){if(!c)throw b.createError("WrappedRange: Range must be specified");this.nativeRange=c,a(this)},l.createPrototypeRange(h,c,d),e=h.prototype,e.selectNode=function(b){this.nativeRange.selectNode(b),a(this)},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(b){this.nativeRange.surroundContents(b),a(this)},e.collapse=function(b){this.nativeRange.collapse(b),a(this)},e.cloneRange=function(){return new h(this.nativeRange.cloneRange())},e.refresh=function(){a(this)},e.toString=function(){return this.nativeRange.toString()};var k=document.createTextNode("test");i.getBody(document).appendChild(k);var m=document.createRange();m.setStart(k,0),m.setEnd(k,0);try{m.setStart(k,1),e.setStart=function(b,c){this.nativeRange.setStart(b,c),a(this)},e.setEnd=function(b,c){this.nativeRange.setEnd(b,c),a(this)},f=function(b){return function(c){this.nativeRange[b](c),a(this)}}}catch(n){e.setStart=function(b,c){try{this.nativeRange.setStart(b,c)}catch(d){this.nativeRange.setEnd(b,c),this.nativeRange.setStart(b,c)}a(this)},e.setEnd=function(b,c){try{this.nativeRange.setEnd(b,c)}catch(d){this.nativeRange.setStart(b,c),this.nativeRange.setEnd(b,c)}a(this)},f=function(b,c){return function(d){try{this.nativeRange[b](d)}catch(e){this.nativeRange[c](d),this.nativeRange[b](d)}a(this)}}}e.setStartBefore=f("setStartBefore","setEndBefore"),e.setStartAfter=f("setStartAfter","setEndAfter"),e.setEndBefore=f("setEndBefore","setStartBefore"),e.setEndAfter=f("setEndAfter","setStartAfter"),m.selectNodeContents(k),e.selectNodeContents=m.startContainer==k&&m.endContainer==k&&0==m.startOffset&&m.endOffset==k.length?function(b){this.nativeRange.selectNodeContents(b),a(this)}:function(a){this.setStart(a,0),this.setEnd(a,l.getEndOffset(a))},m.selectNodeContents(k),m.setEnd(k,3);var o=document.createRange();o.selectNodeContents(k),o.setEnd(k,4),o.setStart(k,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)};var p=document.createElement("div");p.innerHTML="123";var q=p.firstChild;document.body.appendChild(p),m.setStart(q,1),m.setEnd(q,2),m.deleteContents(),"13"==q.data&&(e.deleteContents=function(){this.nativeRange.deleteContents(),a(this)},e.extractContents=function(){var b=this.nativeRange.extractContents();return a(this),b}),document.body.removeChild(p),j.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),i.getBody(document).removeChild(k),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=c(a,"createNativeRange"),a.createRange()};a.features.implementsTextRange&&(h.rangeToTextRange=function(a){if(a.collapsed)return g(new k(a.startContainer,a.startOffset),!0);var b=g(new k(a.startContainer,a.startOffset),!0),c=g(new k(a.endContainer,a.endOffset),!1),d=i.getDocument(a.startContainer).body.createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d}),h.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=h,a.createRange=function(b){return b=c(b,"createRange"),new h(a.createNativeRange(b))},a.createRangyRange=function(a){return a=c(a,"createRangyRange"),new l(a)},a.createIframeRange=function(c){return b.deprecationNotice("createIframeRange()","createRange(iframeEl)"),a.createRange(c)},a.createIframeRangyRange=function(c){return b.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),a.createRangyRange(c)},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(c)}),c=b=null})}),a.createModule("WrappedSelection",function(a,b){function c(a){return"string"==typeof a?"backward"==a:!!a}function d(a,c){if(a){if(z.isWindow(a))return a;if(a instanceof q)return a.win;var d=z.getContentDocument(a);if(!d)throw b.createError(c+"(): "+"Parameter must be a Window object or DOM node");return z.getWindow(d)}return window}function e(a){return d(a,"getWinSelection").getSelection()}function f(a){return d(a,"getDocSelection").document.selection}function g(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function h(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function i(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function j(b){var c;return b instanceof B?(c=a.createNativeRange(b.getDocument()),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset)):b instanceof C?c=b.nativeRange:a.features.implementsDomRange&&b instanceof z.getWindow(b.startContainer).Range&&(c=b),c}function k(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!z.isAncestorOf(a[0],a[b]))return!1;return!0}function l(a){var c=a.getNodes();if(!k(c))throw b.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function m(a){return!!a&&"undefined"!=typeof a.text}function n(a,b){var c=new C(b);a._ranges=[c],g(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function o(b){if(b._ranges.length=0,"None"==b.docSelection.type)i(b);else{var c=b.docSelection.createRange();if(m(c))n(b,c);else{b.rangeCount=c.length;for(var d,e=z.getDocument(c.item(0)),f=0;f<b.rangeCount;++f)d=a.createRange(e),d.selectNode(c.item(f)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,g(b,b._ranges[b.rangeCount-1],!1)}}}function p(a,c){for(var d=a.docSelection.createRange(),e=l(c),f=z.getDocument(d.item(0)),g=z.getBody(f).createControlRange(),h=0,i=d.length;i>h;++h)g.add(d.item(h));try{g.add(e)}catch(j){throw b.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}g.select(),o(a)}function q(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function r(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.detached=!0}function s(a,b){for(var c,d,e=U.length;e--;)if(c=U[e],d=c.selection,"deleteAll"==b)r(d);else if(c.win==a)return"delete"==b?(U.splice(e,1),!0):d;return"deleteAll"==b&&(U.length=0),null}function t(a,c){for(var d,e=z.getDocument(c[0].startContainer),f=z.getBody(e).createControlRange(),g=0;rangeCount>g;++g){d=l(c[g]);try{f.add(d)}catch(h){throw b.createError("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select(),o(a)}function u(a,b){if(a.anchorNode&&z.getDocument(a.anchorNode)!==z.getDocument(b))throw new D("WRONG_DOCUMENT_ERR")}function v(a){var b=[],c=new E(a.anchorNode,a.anchorOffset),d=new E(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=B.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var w,x,y="boolean",z=a.dom,A=a.util,B=a.DomRange,C=a.WrappedRange,D=a.DOMException,E=z.DomPosition,F="Control",G=a.util.isHostMethod(window,"getSelection"),H=a.util.isHostObject(document,"selection");a.features.implementsWinGetSelection=G,a.features.implementsDocSelection=H;var I=H&&(!G||a.config.preferTextRange);I?(w=f,a.isSelectionValid=function(a){var b=d(a,"isSelectionValid").document,c=b.selection;return"None"!=c.type||z.getDocument(c.createRange().parentElement())==b}):G?(w=e,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=w;var J=w(),K=a.createNativeRange(document),L=z.getBody(document),M=A.areHostProperties(J,["anchorNode","focusNode","anchorOffset","focusOffset"]);a.features.selectionHasAnchorAndFocus=M;var N=A.isHostMethod(J,"extend");a.features.selectionHasExtend=N;var O="number"==typeof J.rangeCount;a.features.selectionHasRangeCount=O;var P=!1,Q=!0;A.areHostMethods(J,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof J.rangeCount&&a.features.implementsDomRange&&function(){{window.getSelection()}}(),a.features.selectionSupportsMultipleRanges=P,a.features.collapsedNonEditableSelectionsSupported=Q;var R,S=!1;L&&A.isHostMethod(L,"createControlRange")&&(R=L.createControlRange(),A.areHostProperties(R,["item","add"])&&(S=!0)),a.features.implementsControlRange=S,x=M?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var T;A.isHostMethod(J,"getRangeAt")?T=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:M&&(T=function(b){var c=z.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d});var U=[];a.getSelection=function(a){if(a&&a instanceof q)return a.refresh(),a;a=d(a,"getSelection");var b=s(a),c=w(a),e=H?f(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh()):(b=new q(c,e,a),U.push({win:a,selection:b})),b},a.getIframeSelection=function(c){return b.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),a.getSelection(z.getIframeWindow(c))};var V=q.prototype;if(!I&&M&&A.areHostMethods(J,["removeAllRanges","addRange"])){V.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),i(this)};var W=function(b,c){var d=B.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(j(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};V.addRange=O?function(b,d){if(S&&H&&this.docSelection.type==F)p(this,b);else if(c(d)&&N)W(this,b);else{var e;if(P?e=this.rangeCount:(this.removeAllRanges(),e=0),this.nativeSelection.addRange(j(b).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==e+1){if(a.config.checkSelectionRanges){var f=T(this.nativeSelection,this.rangeCount-1);f&&!B.rangesEqual(f,b)&&(b=new C(f))}this._ranges[this.rangeCount-1]=b,g(this,b,Z(this.nativeSelection)),this.isCollapsed=x(this)}else this.refresh()}}:function(a,b){c(b)&&N?W(this,a):(this.nativeSelection.addRange(j(a)),this.refresh())},V.setRanges=function(a){if(S&&a.length>1)t(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(A.isHostMethod(J,"empty")&&A.isHostMethod(K,"select")&&S&&I))return b.fail("No means of selecting a Range or TextRange was found"),!1;V.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=z.getDocument(this.anchorNode);else if(this.docSelection.type==F){var b=this.docSelection.createRange();b.length&&(a=z.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}i(this)},V.addRange=function(a){this.docSelection.type==F?p(this,a):(C.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,g(this,a,!1))},V.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?t(this,a):b&&this.addRange(a[0])}}V.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new D("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var X;if(I)X=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=z.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==F?o(b):m(c)?n(b,c):i(b)};else if(A.isHostMethod(J,"getRangeAt")&&"number"==typeof J.rangeCount)X=function(b){if(S&&H&&b.docSelection.type==F)o(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));g(b,b._ranges[b.rangeCount-1],Z(b.nativeSelection)),b.isCollapsed=x(b)}else i(b)};else{if(!M||typeof J.isCollapsed!=y||typeof K.collapsed!=y||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;X=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=T(c,0),a._ranges=[b],a.rangeCount=1,h(a),a.isCollapsed=x(a)):i(a)}}V.refresh=function(a){var b=a?this._ranges.slice(0):null,c=this.anchorNode,d=this.anchorOffset;if(X(this),a){var e=b.length;if(e!=this._ranges.length)return!0;if(this.anchorNode!=c||this.anchorOffset!=d)return!0;for(;e--;)if(!B.rangesEqual(b[e],this._ranges[e]))return!0;return!1}};var Y=function(b,c){var d=b.getAllRanges();b.removeAllRanges();for(var e=0,f=d.length;f>e;++e)a.DomRange.rangesEqual(c,d[e])||b.addRange(d[e]);b.rangeCount||i(b)};V.removeRange=S?function(a){if(this.docSelection.type==F){for(var b,c=this.docSelection.createRange(),d=l(a),e=z.getDocument(c.item(0)),f=z.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),o(this)}else Y(this,a)}:function(a){Y(this,a)};var Z;!I&&M&&a.features.implementsDomRange?(Z=function(a){var b=!1;return a.anchorNode&&(b=1==z.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},V.isBackward=function(){return Z(this)}):Z=V.isBackward=function(){return!1},V.isBackwards=V.isBackward,V.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},V.collapse=function(b,c){u(this,b);var d=a.createRange(b);d.collapseToPoint(b,c),this.setSingleRange(d),this.isCollapsed=!0},V.collapseToStart=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},V.collapseToEnd=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},V.selectAllChildren=function(b){u(this,b);var c=a.createRange(b);c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},V.deleteFromDocument=function(){if(S&&H&&this.docSelection.type==F){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();if(c.length){this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}}},V.getAllRanges=function(){for(var a=[],b=0,c=this._ranges.length;c>b;++b)a[b]=this.getRangeAt(b);return a},V.setSingleRange=function(a,b){this.removeAllRanges(),this.addRange(a,b)},V.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},V.toHtml=function(){var a=[];if(this.rangeCount)for(var b=0,c=this._ranges.length;c>b;++b)a.push(this._ranges[b].toHtml());return a.join("")},V.getName=function(){return"WrappedSelection"},V.inspect=function(){return v(this)},V.detach=function(){s(this.win,"delete"),r(this)},q.detachAll=function(){s(null,"deleteAll")},q.inspect=v,q.isDirectionBackward=c,a.Selection=q,a.selectionPrototype=V,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(b)}),b=null})}),a.createModule("SaveRestore",function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=o.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(p)),f.insertNode(c),f.detach(),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),g.parentNode.removeChild(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(b,c){var e,f,g=a.DomRange.getRangeDocument(b),h=b.toString();return b.collapsed?(f=d(b,!1),{document:g,markerId:f.id,collapsed:!0}):(f=d(b,!1),e=d(b,!0),{document:g,startMarkerId:e.id,endMarkerId:f.id,collapsed:!1,backward:c,toString:function(){return"original text: '"+h+"', new text: '"+b.toString()+"'"}})}function h(d,f){var g=d.document;"undefined"==typeof f&&(f=!0);var h=a.createRange(g);if(d.collapsed){var i=c(d.markerId,g);if(i){i.style.display="inline";var j=i.previousSibling;j&&3==j.nodeType?(i.parentNode.removeChild(i),h.collapseToPoint(j,j.length)):(h.collapseBefore(i),i.parentNode.removeChild(i))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(g,h,d.startMarkerId,!0),e(g,h,d.endMarkerId,!1);return h}function i(b,d){var e,h,i=[];b=b.slice(0),b.sort(f);for(var j=0,k=b.length;k>j;++j)i[j]=g(b[j],d);for(j=k-1;j>=0;--j)e=b[j],h=a.DomRange.getRangeDocument(e),e.collapsed?e.collapseAfter(c(i[j].markerId,h)):(e.setEndBefore(c(i[j].endMarkerId,h)),e.setStartAfter(c(i[j].startMarkerId,h)));return i}function j(c){if(!a.isSelectionValid(c))return b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var d=a.getSelection(c),e=d.getAllRanges(),f=1==e.length&&d.isBackward(),g=i(e,f);return d.setRanges(e),{win:c,rangeInfos:g,restored:!1}}function k(a){for(var b=[],c=a.length,d=c-1;d>=0;d--)b[d]=h(a[d],!0);return b}function l(b,c){if(!b.restored){var d=b.rangeInfos,e=a.getSelection(b.win),f=k(d),g=d.length;1==g&&c&&a.features.selectionHasExtend&&d[0].backward?(e.removeAllRanges(),e.addRange(f[0],!0)):e.setRanges(f),b.restored=!0}}function m(a,b){var d=c(b,a);d&&d.parentNode.removeChild(d)}function n(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?m(a.doc,b.markerId):(m(a.doc,b.startMarkerId),m(a.doc,b.endMarkerId))}a.requireModules(["DomUtil","DomRange","WrappedRange"]);var o=a.dom,p="";a.util.extend(a,{saveRange:g,restoreRange:h,saveRanges:i,restoreRanges:k,saveSelection:j,restoreSelection:l,removeMarkerElement:m,removeMarkers:n})}),a.createModule("TextRange",function(a,b){function c(a){return a&&(1==a.nodeType&&!/^(inline(-block|-table)?|none)$/.test(n(a))||9==a.nodeType||11==a.nodeType)}function d(a){return S.isCharacterDataNode(a)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(a.nodeName)}function e(a){for(var b=[];a.parentNode;)b.unshift(a.parentNode),a=a.parentNode;return b}function f(a){return e(a).concat([a])}function g(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function h(a,b){return!b&&a.hasChildNodes()?a.firstChild:g(a)}function i(a){var b=a.previousSibling;if(b){for(a=b;a.hasChildNodes();)a=a.lastChild;return a}var c=a.parentNode;return c&&1==c.nodeType?c:null}function j(a){for(var b=f(a),c=0,d=b.length;d>c;++c)if(1==b[c].nodeType&&"none"==n(b[c]))return!0;return!1}function k(a){var b;return 3==a.nodeType&&(b=a.parentNode)&&"hidden"==db(b,"visibility")}function l(a){if(!a||3!=a.nodeType)return!1;var b=a.data;if(""==b)return!0;var c=a.parentNode;if(!c||1!=c.nodeType)return!1;var d=db(a.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(b)&&/^(normal|nowrap)$/.test(d)||/^[\t\r ]+$/.test(b)&&"pre-line"==d}function m(a){if(""==a.data)return!0;if(!l(a))return!1;var b=a.parentNode;return b?j(a)?!0:!1:!0}function n(a,b){var c=db(a,"display",b),d=a.tagName.toLowerCase();return"block"==c&&eb&&fb.hasOwnProperty(d)?fb[d]:c}function o(a){var b=a.nodeType;return 7==b||8==b||j(a)||/^(script|style)$/i.test(a.nodeName)||k(a)||m(a)}function p(a,b){var c=a.nodeType;return 7==c||8==c||1==c&&"none"==n(a,b)}function q(a){if(!o(a)){if(3==a.nodeType)return!0;for(var b=a.firstChild;b;b=b.nextSibling)if(q(b))return!0}return!1}function r(a){return new U(a.startContainer,a.startOffset)}function s(a){return new U(a.endContainer,a.endOffset)}function t(a,b,c,d,e,f){this.character=a,this.position=b,this.isLeadingSpace=c,this.isTrailingSpace=d,this.isBr=e,this.collapsible=f}function u(a){if("br"==a.tagName.toLowerCase())return"";switch(n(a)){case"inline":for(var b=a.lastChild;b;){if(!p(b))return 1==b.nodeType?u(b):"";b=b.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return q(a)?"\n":""}return""}function v(a){switch(n(a)){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return q(a)?"\n":""}return""}function w(a){var b=a.node,c=a.offset;if(!b)return null;var e,f,g;return c==S.getNodeLength(b)?(e=b.parentNode,f=e?S.getNodeIndex(b)+1:0):S.isCharacterDataNode(b)?(e=b,f=c+1):(g=b.childNodes[c],d(g)?(e=g,f=0):(e=b,f=c+1)),e?new U(e,f):null}function x(a){if(!a)return null;var b,c,e,f=a.node,g=a.offset;return 0==g?(b=f.parentNode,c=b?S.getNodeIndex(f):0):S.isCharacterDataNode(f)?(b=f,c=g-1):(e=f.childNodes[g-1],d(e)?(b=e,c=S.getNodeLength(e)):(b=f,c=g-1)),b?new U(b,c):null}function y(a){var b=w(a);if(!b)return null;var c=b.node,d=b;return o(c)&&(d=new U(c.parentNode,S.getNodeIndex(c)+1)),d}function z(a){var b=x(a);if(!b)return null;var c=b.node,d=b;return o(c)&&(d=new U(c.parentNode,S.getNodeIndex(c))),d}function A(a,b){return{characterOptions:b}}function B(a){var b=null,c=!1,d=db(a.parentNode,"whiteSpace"),e="pre-line"==d;return e?(b=X,c=!0):("normal"==d||"nowrap"==d)&&(b=W,c=!0),{node:a,text:a.data,spaceRegex:b,collapseSpaces:c,preLine:e}}function C(a,b){var c=a.node,d=a.offset,e="",f=!1,g=!1,h=!1,i=!1;if(d>0)if(3==c.nodeType){var j=c.data,k=j.charAt(d-1),l=b.nodeInfo;l&&l.node===c||(b.nodeInfo=l=B(c));var m=l.spaceRegex;l.collapseSpaces?m.test(k)?(i=!0,d>1&&m.test(j.charAt(d-2))||l.preLine&&"\n"===j.charAt(d)&&bb||(e=" ")):e=k:e=k}else{var n=c.childNodes[d-1];if(n&&1==n.nodeType&&!o(n)&&("br"==n.tagName.toLowerCase()?(e="\n",h=!0):(e=u(n),e&&(g=i=!0))),!e){var p=c.childNodes[d];p&&1==p.nodeType&&!o(p)&&(e=v(p),e&&(f=!0))}}return new t(e,a,f,g,h,i)}function D(a,b){for(var c,d=a;d=y(d);)if(c=C(d,b),""!==c.character)return c;return null}function E(a,b,c){var d,e,f=C(a,b),g=f.character;if(!g)return f;if(W.test(g)){if(!c){var h,i,j=a;for(c=[];(j=z(j))&&(h=C(j,b),i=h.character,""===i||(c.unshift(h)," "==i||"\n"==i)););}return e=c[c.length-1]," "!==g||!f.collapsible||e&&!e.isTrailingSpace&&"\n"!=e.character?f.collapsible&&(!(d=D(a,b))||"\n"==d.character&&d.collapsesPrecedingSpace())?f.character="":"\n"!==g||f.collapsible||(d=D(a,b))&&!d.isTrailingSpace||(f.character=""):f.character="",f}return f}function F(a,c,d,e){function f(){var a=null;return l||(c||(k=y(k)),k?(a=E(k,i),d&&k.equals(d)&&(l=!0)):l=!0,c&&(k=z(k))),a}var g=V({},gb),h=e?V(g,e):g,i=A(S.getWindow(a.node),h);d&&(c?o(d.node)&&(d=z(d)):o(d.node)&&(d=y(d)));var j,k=a,l=!1,m=!1;return{next:function(){if(m)return m=!1,j;for(var a;a=f();)if(a.character)return j=a,a},rewind:function(){if(!j)throw b.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");m=!0},dispose:function(){a=d=i=null}}}function G(a,b){function c(b,c,d){for(var e=a.slice(b,c),f={isWord:d,chars:e,toString:function(){return e.join("")}},g=0,i=e.length;i>g;++g)e[g].token=f;h.push(f)}for(var d,e,f,g=a.join(""),h=[],i=0;d=b.wordRegex.exec(g);){if(e=d.index,f=e+d[0].length,e>i&&c(i,e,!1),b.includeTrailingSpace)for(;Z.test(a[f]);)++f;c(e,f,!0),i=f}return i<a.length&&c(i,a.length,!1),h}function H(a,b){function c(a){for(var b,c,f=[],g=a?d:e,h=!1,i=!1;b=g.next();){if(c=b.character,Y.test(c))i&&(i=!1,h=!0);else{if(h){g.rewind();break}i=!0}f.push(b)}return f}var d=F(a,!1),e=F(a,!0),f=b.tokenizer,g=c(!0),h=c(!1).reverse(),i=f(h.concat(g),b),j=g.length?i.slice(hb(i,g[0].token)):[],k=h.length?i.slice(0,hb(i,h.pop().token)+1):[];return{nextEndToken:function(){var a;return 1!=j.length||(a=j[0]).isWord||(j=f(a.chars.concat(c(!0)),b)),j.shift()},previousStartToken:function(){var a;return 1!=k.length||(a=k[0]).isWord||(k=f(c(!1).reverse().concat(a.chars),b)),k.pop()},dispose:function(){d.dispose(),e.dispose(),j=k=null}}}function I(a){var b,c;return a?(b=a.language||$,c={},V(c,ib[b]||ib[$]),V(c,a),c):ib[$]}function J(a,b,c,d){var e,f,g,h,i,j=0,k=a,l=Math.abs(c);if(0!==c){var m=0>c;switch(b){case Q:for(f=F(a,m);(e=f.next())&&l>j;)++j,h=e;g=e,f.dispose();break;case R:for(var n=H(a,d),o=m?n.previousStartToken:n.nextEndToken;(i=o())&&l>j;)i.isWord&&(++j,h=m?i.chars[0]:i.chars[i.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+b+"' not implemented")}h&&(k=h.position),m?(k=z(k),j=-j):h&&h.isLeadingSpace&&(b==R&&(f=F(a,!1),g=f.next(),f.dispose()),g&&(k=z(g.position)))}return{position:k,unitsMoved:j}}function K(a){return F(r(a),!1,s(a))}function L(a){for(var b,c=[],d=K(a);b=d.next();)c.push(b);return d.dispose(),c}function M(b,c,d){var e=a.createRange(b.node);e.setStart(b.node,b.offset),e.setEnd(c.node,c.offset);var f=!e.expand("word",d);return e.detach(),f}function N(a,b,c,d,e){function f(a,b){var c=z(p[a].position),d=p[b-1].position,f=!e.wholeWordsOnly||M(c,d,e.wordOptions);return{startPos:c,endPos:d,valid:f}}for(var g,h,i,j,k,l,m=_(e.direction),n=F(a,m,m?r(d):s(d)),o="",p=[],q=null;g=n.next();)if(h=g.character,h=g.character,c||e.caseSensitive||(h=h.toLowerCase()),m?(p.unshift(g),o=h+o):(p.push(g),o+=h),c){if(k=b.exec(o))if(l){if(i=k.index,j=i+k[0].length,!m&&j<o.length||m&&i>0){q=f(i,j);break}}else l=!0}else if(-1!=(i=o.indexOf(b))){q=f(i,i+b.length);break}return l&&(q=f(i,j)),n.dispose(),q}function O(a,b){return function(c,d,e){"undefined"==typeof d&&(d=c,c=Q),c==R&&(e=I(e));var f=a;b&&(f=d>=0,this.collapse(!f));var g=f?r:s,h=J(g(this),c,d,e),i=h.position;return this[f?"setStart":"setEnd"](i.node,i.offset),h.unitsMoved}}a.requireModules(["WrappedSelection"]);var P="undefined",Q="character",R="word",S=a.dom,T=a.util,U=S.DomPosition,V=T.extend,W=/^[ \t\f\r\n]+$/,X=/^[ \t\f\r]+$/,Y=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,Z=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,$="en",_=a.Selection.isDirectionBackward,ab=!1,bb=!1,cb=document.createElement("div");T.isHostProperty(cb,"innerText")&&(cb.innerHTML="<p>&nbsp; </p><p></p>",document.body.appendChild(cb),ab=!/ /.test(cb.innerText),document.body.removeChild(cb));var db;typeof window.getComputedStyle!=P?db=function(a,b,c){return(c||S.getWindow(a)).getComputedStyle(a,null)[b]}:typeof document.documentElement.currentStyle!=P?db=function(a,b){return a.currentStyle[b]}:b.fail("No means of obtaining computed style properties found");var eb;!function(){var a=document.createElement("table");document.body.appendChild(a),eb="block"==db(a,"display"),document.body.removeChild(a)}(),a.features.tableCssDisplayBlock=eb;var fb={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};t.prototype.toString=function(){return this.character},t.prototype.collapsesPrecedingSpace=function(){return"\n"==this.character&&(this.isBr&&bb||this.isTrailingSpace&&ab)};var gb={ignoreSpaceBeforeLineBreak:!0},hb=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},ib={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:G}},jb={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null};V(S,{nextNode:h,previousNode:i,hasInnerText:q}),V(a.rangePrototype,{moveStart:O(!0,!1),moveEnd:O(!1,!1),move:O(!0,!0),expand:function(a,b){var c=!1;if(a||(a=Q),a==R){b=I(b);var d,e,f=r(this),g=s(this),h=H(f,b),i=h.nextEndToken(),j=z(i.chars[0].position);if(this.collapsed)d=i;else{var k=H(g,b);d=k.previousStartToken()}return e=d.chars[d.chars.length-1].position,j.equals(f)||(this.setStart(j.node,j.offset),c=!0),e.equals(g)||(this.setEnd(e.node,e.offset),c=!0),c}return this.moveEnd(Q,1)},text:function(){return this.collapsed?"":L(this).join("")},selectCharacters:function(a,b,c){this.selectNodeContents(a),this.collapse(!0),this.moveStart(b),this.collapse(!0),this.moveEnd(c-b)},toCharacterRange:function(a){a||(a=document.body);var b,c,d=a.parentNode,e=S.getNodeIndex(a),f=-1==S.comparePoints(this.startContainer,this.endContainer,d,e),g=this.cloneRange();return f?(g.setStart(this.startContainer,this.startOffset),g.setEnd(d,e),b=-g.text().length):(g.setStart(d,e),g.setEnd(this.startContainer,this.startOffset),b=g.text().length),c=b+this.text().length,{start:b,end:c}},findText:function(b,c){var d=V({},jb),e=c?V(d,c):d;e.wholeWordsOnly&&(e.wordOptions=I(e.wordOptions),e.wordOptions.includeTrailingSpace=!1);var f=_(e.direction),g=e.withinRange;g||(g=a.createRange(),g.selectNodeContents(this.getDocument()));var h=b,i=!1;"string"==typeof h?e.caseSensitive||(h=h.toLowerCase()):i=!0;var j=f?s(this):r(this),k=g.comparePoint(j.node,j.offset);-1===k?j=r(g):1===k&&(j=s(g));for(var l,m=j,n=!1;;)if(l=N(m,h,i,g,e)){if(l.valid)return this.setStart(l.startPos.node,l.startPos.offset),this.setEnd(l.endPos.node,l.endPos.offset),!0;m=f?l.startPos:l.endPos}else{if(!e.wrap||n)return!1;g=g.cloneRange(),f?(m=s(g),g.setStart(j.node,j.offset)):(m=r(g),g.setEnd(j.node,j.offset)),n=!0}},pasteHtml:function(a){if(this.deleteContents(),a){var b=this.createContextualFragment(a),c=b.lastChild;this.insertNode(b),this.collapseAfter(c)}}}),V(a.selectionPrototype,{expand:function(a,b){for(var c=this.getAllRanges(),d=c.length,e=this.isBackward(),f=0,g=c.length;g>f;++f)c[f].expand(a,b);this.removeAllRanges(),e&&1==d?this.addRange(c[0],!0):this.setRanges(c)},move:function(a,b,c){if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var d=this.getRangeAt(0);d.move(a,b,c),this.setSingleRange(d)}},selectCharacters:function(b,c,d,e){var f=a.createRange(b);f.selectCharacters(b,c,d),this.setSingleRange(f,e)},saveCharacterRanges:function(a){for(var b=this.getAllRanges(),c=b.length,d=[],e=1==c&&this.isBackward(),f=0,g=b.length;g>f;++f)d[f]={range:b[f].toCharacterRange(a),backward:e};return d},restoreCharacterRanges:function(b,c){this.removeAllRanges();for(var d,e,f=0,g=c.length;g>f;++f)e=c[f],d=a.createRange(b),d.selectCharacters(b,e.range.start,e.range.end),this.addRange(d,e.backward)},text:function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=this.getRangeAt(b).text();return a.join("")}}),a.innerText=function(b){var c=a.createRange(b);c.selectNodeContents(b);var d=c.text();return c.detach(),d},a.createWordIterator=function(a,b,c,d){d=I(d);var e=new U(a,b),f=H(e,d),g=_(c);return{next:function(){return g?f.previousStartToken():f.nextEndToken()},dispose:function(){f.dispose(),this.next=function(){}}}},a.textRange={isBlockNode:c,isCollapsedWhitespaceNode:m,nextPosition:w,previousPosition:x,nextVisiblePosition:y,previousVisiblePosition:z}
})}(),function(a,b){var c=a.jquip,d=a.$,e=function(){function c(a,c){for(var d,e=0,f=Rb.length;f>e;e++)if(Rb[e].apply(this,arguments))return this;return a?G(a)?(W?a():db.push(a),this):H(a)?this.make(a):a.nodeType||J(a)?this.make([a]):"body"==a&&!c&&bb.body?(this.context=a.context,this[0]=bb.body,this.length=1,this.selector=a,this):a.selector!==b?(this.context=a.context,this.selector=a.selector,this.make(a)):(a=E(a)&&"<"===a.charAt(0)?(d=rb.exec(a))?[bb.createElement(d[1])]:P(a).childNodes:m(this.selector=a,c),this.make(a),L(c)&&this.attr(c),this):this}function d(a,b){return new c(a,b)}function e(a){return!a||!a.parentNode||11==a.parentNode.nodeType}function f(a,b,c){if(b=b||0,G(b))return x(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return x(a,function(a){return a===b===c});if(E(b)){var e=":"==b.charAt(0)&&d.Expr[b.substring(1)];return x(a,function(a){var c,d=a.parentNode,f=!d;return f&&(d=Pb,d.appendChild(a)),c=e?e(a):a.parentNode&&s(m(b,a.parentNode),a)>=0,f&&d.removeChild(a),c})}return x(a,function(a){return s(b,a)>=0===c})}function g(a,b,c){var d=a[Ob];return D(c)?(d||(d=a[Ob]=Tb++),(Ub[d]||(Ub[d]={}))[b]=c):d&&Ub[d]&&(b?Ub[d][b]:Ub[d])}function h(a){if(!Vb[a]){var b=d("<"+a+">").appendTo(bb.body),c=d.css&&d.css(b[0],"display")||b[0].style.display;b.remove(),Vb[a]=c}return Vb[a]}function i(a,b){if(a.length=b&&b.length||0,0===a.length)return a;for(var c=0,d=b.length;d>c;c++)a[c]=b[c];return a}function j(a,b){b=" "+b+" ";for(var c=0,d=a.length;d>c;c++)if(k(a[c],b))return!0;return!1}function k(a,b){return 1===a.nodeType&&(" "+a.className+" ").replace(jb," ").indexOf(b)>-1}function l(a,b,c){b=b||bb,c=c||[],1==b.nodeType&&a(b)&&c.push(b);for(var d=b.childNodes,e=0,f=d.length;f>e;e++){var g=d[e];1==g.nodeType&&l(a,g,c)}return c}function m(a,b,c){if(a&&E(a)){b instanceof d&&(b=b[0]),b=b||bb,c=c||d.query;var e,f=a.substring(1);return lb.test(a)&&b===bb?(e=bb.getElementById(f))?[e]:[]:O(mb.test(a)&&b.getElementsByClassName?b.getElementsByClassName(f):kb.test(a)?b.getElementsByTagName(a):c(a,b))}return 1==a.nodeType||9==a.nodeType?[a]:[]}function n(a,c,d){var e,f=bb.head||bb.getElementsByTagName("head")[0]||cb,g=bb.createElement("script");d&&(g.async="async"),g.onreadystatechange=function(){(e=g.readyState)&&"loaded"!=e&&"complete"!=e||(g.onload=g.onreadystatechange=null,f&&g.parentNode&&f.removeChild(g),g=b,c&&c())},g.onload=c,g.src=a,f.insertBefore(g,f.firstChild)}function o(){$.console&&$.console.warn(arguments)}function p(a,b,c){if(null!=a)if(Lb&&a.forEach===Lb)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(d in a&&b.call(c,a[d],d,a)===Eb)return}else for(var f in a)if(Hb.call(a,f)&&b.call(c,a[f],f,a)===Eb)return}function q(a,c){if(a&&a.getAttribute&&c){var d=a.hasAttribute&&a.hasAttribute(c)?a.getAttribute(c):a[c];return null===d?b:d}}function r(a,b){return D(a)?d(b).filter(a):d(b)}function s(a,b){if(null==a)return-1;var c,d;if(Nb&&a.indexOf===Nb)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function t(a,b,c){var d=[];return null==a?d:Mb&&a.filter===Mb?a.filter(b,c):(p(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)}function u(a,c,e){for(var f=[],g=a[c];g&&9!==g.nodeType&&(e===b||1!==g.nodeType||!d(g).is(e));)1===g.nodeType&&f.push(g),g=g[c];return f}function v(a,b,c){b=b||1;for(var d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a}function w(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}function x(a,b,c){var d,e=[];c=!!c;for(var f=0,g=a.length;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e}function y(a,b,c){var e,f,g=[],h=0,i=a.length,j=a instanceof d||"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||H(a));if(j)for(;i>h;h++)e=b(a[h],h,c),null!=e&&(g[g.length]=e);else for(f in a)e=b(a[f],f,c),null!=e&&(g[g.length]=e);return g.concat.apply([],g)}function z(a,b,c){if(!a)return{};var d=g(a,b,c);return d||A(a)["data-"+b]}function A(a){var b={};if(1==a.nodeType)for(var c=0,d=a.attributes,e=d.length;e>c;c++)b[d.item(c).nodeName]=d.item(c).nodeValue;return b}function B(a,b){return a&&b?a.toLowerCase()===b.toLowerCase():a==b}function C(a){return null==a?String(a):Ab[zb.call(a)]||"object"}function D(a){return void 0!==a}function E(a){return"string"==typeof a}function F(a){return"object"==typeof a}function G(a){return"function"==typeof a||"function"===C(a)}function H(a){return"array"===C(a)}function I(a){return!E(a)&&"number"==typeof a.length}function J(a){return a&&"object"==typeof a&&"setInterval"in a}function K(a){return null==a||!ob.test(a)||isNaN(a)}function L(a){if(!a||"object"!==C(a)||a.nodeType||J(a))return!1;try{if(a.constructor&&!Hb.call(a,"constructor")&&!Hb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Hb.call(a,d)}function M(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;f>e;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a}function N(){var a,c,d,e,f,g,h=arguments,i=h[0]||{},j=1,k=h.length,l=!1;for("boolean"==typeof i&&(l=i,i=h[1]||{},j=2),"object"==typeof i||G(i)||(i={}),k===j&&(i=this,--j);k>j;j++)if(null!=(a=h[j]))for(c in a)d=i[c],e=a[c],i!==e&&(l&&e&&(L(e)||(f=H(e)))?(f?(f=!1,g=d&&H(d)?d:[]):g=d&&L(d)?d:{},i[c]=N(l,g,e)):e!==b&&(i[c]=e));return i}function O(a,b){var c=b||[];if(null!=a){var d=C(a);null==a.length||"string"==d||"function"==d||"regexp"===d||J(a)?Jb.call(c,a):M(c,a)}return c}function P(a,b,c){if(b=b||bb||b.ownerDocument||b[0]&&b[0].ownerDocument||bb,c=c||b.createDocumentFragment(),I(a))return R(a,b,c)&&c;for(var d=Q(a);d.firstChild;)c.appendChild(d.firstChild);return c}function Q(a,b){var c=(b||bb).createElement("div"),d=(ib.exec(a)||["",""])[1].toLowerCase(),e=Db[d]||Db._default,f=e[0];for(c.innerHTML=e[1]+a+e[2];f--;)c=c.lastChild;return c}function R(a,b,c){var d,e,f=[];for(d=0;null!=(e=a[d]);d++)E(e)&&(e=Q(e,b)),e.nodeType?f.push(e):f=M(f,e);if(c)for(d=0;d<f.length;d++)f[d].nodeType&&c.appendChild(f[d]);return f}function S(a){if(Z&&(Bb=Cb,a.sort(Z),Bb))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a}function T(){if(!bb.body)return null;var a=bb.createElement("div");bb.body.appendChild(a),a.style.width="20px",a.style.padding="10px";var b=a.offsetWidth;return bb.body.removeChild(a),40==b}function U(a,b){eb.push({url:a,cb:b})}function V(){p(db,function(a){a()}),W=!0}var W,X,Y,Z,$=a,_="http://cdnjs.cloudflare.com/ajax/libs/sizzle/1.4.4/sizzle.min.js",ab=function(){return $.Sizzle||$.qwery},bb=document,cb=bb.documentElement,db=[],eb=[],fb=/Until$/,gb=/,/,hb=/^(?:parents|prevUntil|prevAll)/,ib=/<([\w:]+)/,jb=/[\n\t\r]/g,kb=/^[\w-]+$/,lb=/^#[\w-]+$/,mb=/^\.[\w-]+$/,nb=/\s+/,ob=/\d/,pb=/\S/,qb=/\r\n/g,rb=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,sb=/\r?\n/g,tb=/^(?:select|textarea)/i,ub=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,vb=String.prototype.trim,wb=/^\s+/,xb=/\s+$/,yb={children:!0,contents:!0,next:!0,prev:!0},zb=Object.prototype.toString,Ab={},Bb=!1,Cb=!0,Db={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Eb={},Fb=Array.prototype,Gb=Object.prototype,Hb=Gb.hasOwnProperty,Ib=Fb.slice,Jb=Fb.push,Kb=Fb.indexOf,Lb=Fb.forEach,Mb=Fb.filter,Nb=Fb.indexOf,Ob="jq-"+ +new Date,Pb=bb.createElement("p");pb.test("")&&(wb=/^[\s\xA0]+/,xb=/[\s\xA0]+$/);var Qb,Rb=[],Sb={},Tb=1,Ub={_id:0},Vb={};Qb=c.prototype=d.prototype=d.fn={constructor:d,selector:"",length:0,dm:function(a,b,c){var d,e,f,g,h,i=a[0];if(i&&this[0]){if(!(e=3===i.nodeType&&i)&&(d=i&&i.parentNode,e=d&&11===d.nodeType&&d.childNodes.length===this.length?d:P(i),f=e.firstChild,1===e.childNodes.length&&(e=f),!f))return this;for(h=0,g=this.length;g>h;h++)c.call(this[h],0==h?e:e.cloneNode(!0))}return this},ps:function(a,b,c){var d=this.constructor();return H(a)?Jb.apply(d,a):M(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d}},Qb.make=function(a){return i(this,a),this},Qb.toArray=function(){return Ib.call(this,0)},Qb.get=function(a){return D(a)?0>a?this[this.length+a]:this[a]:this.toArray()},Qb.add=function(a,b){var c="string"==typeof a?d(a,b):O(a&&a.nodeType?[a]:a),f=M(this.get(),c);return this.ps(e(c[0])||e(f[0])?f:S(f))},Qb.each=function(a){if(!G(a))return this;for(var b=0,c=this.length;c>b&&a.call(this[b],b,this[b])!==!1;b++);return this},Qb.attr=function(a,c){var d=this[0];return E(a)&&c===b?q(d,a):this.each(function(b){var d=this.nodeType;if(3!==d&&8!==d&&2!==d)if(F(a))for(var e in a)null===c?this.removeAttribute(a):this.setAttribute(e,a[e]);else this.setAttribute(a,G(c)?c.call(this,b,this.getAttribute(a)):c)})},Qb.removeAttr=function(a){return this.each(function(){1==this.nodeType&&this.removeAttribute(a)})},Qb.data=function(a,c){return c===b?z(this[0],a):this.each(function(){z(this,a,c)})},Qb.append=function(){return this.dm(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},Qb.prepend=function(){return this.dm(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},Qb.before=function(){return this[0]&&this[0].parentNode?this.dm(arguments,!1,function(a){this.parentNode.insertBefore(a,this)}):this},Qb.after=function(){return this[0]&&this[0].parentNode?this.dm(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)}):this},Qb.replaceWith=function(a){var b=this,c=G(a);return this.each(function(e){var f=this.nextSibling,g=this.parentNode,h=c?a.call(this,e,this):a;g&&11!=g.nodeType?(g.removeChild(this),f?d(f).before(h):d(g).append(h)):b[e]=d(h).clone()[0]})},Qb.hide=function(){return this.each(function(){"none"!=this.style.display&&(g(this,"display",this.style.display),this.style.display="none")})},Qb.show=function(){return this.each(function(){this.style.display=g(this,"display")||h(this.tagName)})},Qb.toggle=function(){return this.each(function(){var a=d(this);d.Expr.hidden(this)?a.show():a.hide()})},Qb.eq=function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},Qb.first=function(){return this.eq(0)},Qb.last=function(){return this.eq(-1)},Qb.slice=function(){return this.ps(Ib.apply(this,arguments),"slice",Ib.call(arguments).join(","))},Qb.map=function(a){return this.ps(y(this,function(b,c){return a.call(b,c,b)}))},Qb.find=function(a){var b,c,e=this;if(!E(a))return d(a).filter(function(){for(b=0,c=e.length;c>b;b++)if(Y(e[b],this))return!0});var f,g,h,i=this.ps("","find",a);for(b=0,c=this.length;c>b;b++)if(f=i.length,M(i,d(a,this[b])),0===b)for(g=f;g<i.length;g++)for(h=0;f>h;h++)if(i[h]===i[g]){i.splice(g--,1);break}return i},Qb.not=function(a){return this.ps(f(this,a,!1),"not",a)},Qb.filter=function(a){return this.ps(f(this,a,!0),"filter",a)},Qb.indexOf=function(a){return s(this,a)},Qb.is=function(a){return this.length>0&&d(this[0]).filter(a).length>0},Qb.remove=function(){for(var a,b=0;D(a=this[b]);b++)a.parentNode&&a.parentNode.removeChild(a);return this},Qb.closest=function(a,b){var c,d,e,f=[];for(c=0,d=this.length;d>c;c++)for(e=this[c];e;){if(r(a,[e]).length>0){f.push(e);break}if(e=e.parentNode,!e||!e.ownerDocument||e===b||11===e.nodeType)break}return f=f.length>1?S(f):f,this.ps(f,"closest",a)},Qb.val=function(a){return D(a)?this.each(function(){this.value=a}):this[0]&&this[0].value||""},Qb.html=function(a){return D(a)?this.each(function(){this.innerHTML=a}):this[0]&&this[0].innerHTML||""},Qb.text=function(a){var b,c=this[0];return D(a)?this.empty().append((c&&c.ownerDocument||bb).createTextNode(a)):c&&(b=c.nodeType)?1===b||9===b?E(c.textContent)?c.textContent:c.innerText.replace(qb,""):3===b||4===b?c.nodeValue:null:null},Qb.empty=function(){var a,b;for(a=0;D(b=this[a]);a++)for(;b.firstChild;)b.removeChild(b.firstChild);return this},Qb.addClass=function(a){var b,c,e,f,g,h,i;if(G(a))return this.each(function(b){d(this).addClass(a.call(this,b,this.className))});if(a&&E(a))for(b=a.split(nb),c=0,e=this.length;e>c;c++)if(f=this[c],f&&1===f.nodeType)if(f.className||1!==b.length){for(g=" "+f.className+" ",h=0,i=b.length;i>h;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");f.className=X(g)}else f.className=a;return this},Qb.removeClass=function(a){var c,e,f,g,h,i,j;if(G(a))return this.each(function(b){d(this).removeClass(a.call(this,b,this.className))});if(a&&E(a)||a===b)for(c=(a||"").split(nb),e=0,f=this.length;f>e;e++)if(g=this[e],1===g.nodeType&&g.className)if(a){for(h=(" "+g.className+" ").replace(jb," "),i=0,j=c.length;j>i;i++)h=h.replace(" "+c[i]+" "," ");g.className=X(h)}else g.className="";return this},Qb.hasClass=function(a){return j(this,a)},Qb.fadeIn=function(){this.each(function(){d(this).show()})},Qb.fadeOut=function(){this.each(function(){d(this).hide()})},Qb.serializeArray=function(){return this.map(function(){return this.elements?O(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tb.test(this.nodeName)||ub.test(this.type))}).map(function(a,b){var c=d(this).val();return null==c||H(c)?y(c,function(a){return{name:b.name,value:a.replace(sb,"\r\n")}}):{name:b.name,value:c.replace(sb,"\r\n")}}).get()},Qb.wrap=function(a){return this.each(function(){var b=d(d(a)[0].cloneNode(!1));d(this).before(b),b.append(d(this))})},Qb.prop=function(a,b){return D(b)?this.each(function(){this[a]=b}):this[0]&&this[0][a]},Qb.clone=function(){return d(this.map(function(){return this.cloneNode(!0)}))},Qb.toggleClass=function(a,b){return this.each(function(){var c=d(this);(D(b)?b:!c.hasClass(a))?c.addClass(a):c.removeClass(a)})},d.Expr={hidden:function(a){return"none"===(d.css&&d.css(a,"display")||a.style.display)},visible:function(a){return!d.Expr.hidden(a)}},d.hasClass=j,d.walk=l,d.$$=m,d.setQuery=function(a){d.query=function(b,c){return m(b,c,a||function(a,b){return b.querySelectorAll(a)})}};var Wb=ab();d.setQuery(Wb||function(a,b){return(b=b||bb).querySelectorAll?O(b.querySelectorAll(a)):[]}),d.loadScript=n,d.each=function(a,c,d){var e,f=0,g=a.length,h=g===b||G(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},d._each=p,d.filter=r,d._indexOf=s,d._defaults=function(a){return p(Ib.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d._filter=t,d.proxy=function(a,b){if("string"==typeof b){var c=a[b];b=a,a=c}if(G(a)){var d=Ib.call(arguments,2),e=function(){return a.apply(b,d.concat(Ib.call(arguments)))};return e.guid=a.guid=a.guid||e.guid||Tb++,e}},d.dir=u,d.nth=v,d.sibling=w,d.grep=x,d.map=y,d.data=z,d.attrs=A,d.eqSI=B,X=vb?function(a){return null==a?"":vb.call(a)}:function(a){return null==a?"":a.toString().replace(wb,"").replace(xb,"")},d.trim=X,d.indexOf=d.inArray=function(a,b){if(!b)return-1;if(Kb)return Kb.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},p("Boolean Number String Function Array Date RegExp Object".split(" "),function(a){return Ab["[object "+a+"]"]=a.toLowerCase(),this}),d.type=C,d.isFunction=G,d.isArray=Array.isArray||H,d.isWindow=J,d.isNaN=K,d.merge=M,d.extend=d.fn.extend=N,d.makeArray=O,d.htmlFrag=P;var Xb=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1};return Y=d.contains=cb.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:function(){return!1},Z=cb.compareDocumentPosition?(Y=function(a,b){return!!(16&a.compareDocumentPosition(b))})&&function(a,b){return a===b?(Bb=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){if(a===b)return Bb=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return Xb(a,b);if(!g)return-1;if(!h)return 1;for(;i;)e.unshift(i),i=i.parentNode;for(i=h;i;)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(var j=0;c>j&&d>j;j++)if(e[j]!==f[j])return Xb(e[j],f[j]);return j===c?Xb(a,f[j],-1):Xb(e[j],b,1)},d.unique=S,p({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return v(a,2,"nextSibling")},prev:function(a){return v(a,2,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return w(a.parentNode.firstChild,a)},children:function(a){return w(a.firstChild)},contents:function(a){return"iframe"===a.nodeName?a.contentDocument||a.contentWindow["document "]:O(a.childNodes)}},function(a,b){d.fn[b]=function(c,d){var e=y(this,a,c),f=Ib.call(arguments);return fb.test(b)||(d=c),E(d)&&(e=O(r(d,e))),e=this.length>1&&!yb[b]?S(e):e,(this.length>1||gb.test(d))&&hb.test(b)&&(e=e.reverse()),this.ps(e,b,f.join(","))}}),p({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after"},function(a,b){d.fn[b]=function(c){var e,f,g,h=[],i=d(c),j=1===this.length&&this[0].parentNode;if(j&&11===j.nodeType&&1===j.childNodes.length&&1===i.length)return i[a](this[0]),this;for(e=0,g=i.length;g>e;e++)f=(e>0?this.clone(!0):this).get(),d(i[e])[a](f),h=h.concat(f);return this.ps(h,b,i.selector)}}),function(){var a=document.createElement("div");a.style.display="none",a.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var b=a.getElementsByTagName("a")[0];d.support={boxModel:null,opacity:/^0.55$/.test(b.style.opacity),cssFloat:!!b.style.cssFloat};var c,e=/(webkit)[ \/]([\w.]+)/,f=/(opera)(?:.*version)?[ \/]([\w.]+)/,g=/(msie) ([\w.]+)/,h=/(mozilla)(?:.*? rv:([\w.]+))?/,i=navigator.userAgent.toLowerCase(),j=e.exec(i)||f.exec(i)||g.exec(i)||i.indexOf("compatible")<0&&h.exec(i)||[];c=d.browser={version:j[2]||"0"},c[j[1]||""]=!0}(),d.scriptsLoaded=function(a){G(a)&&db.push(a)},d.loadAsync=U,Wb||bb.querySelectorAll||U(_,function(){d.setQuery(ab())}),d.init=!1,d.onload=function(){if(!d.init)try{d.support.boxModel=T();var a=0;p(eb,function(b){a++,n(b.url,function(){try{b.cb&&b.cb()}catch(c){}--a||V()})}),d.init=!0,a||V()}catch(b){o(b)}},bb.body&&!d.init&&setTimeout(d.onload,1),d.hook=function(a){Rb.push(a)},d.plug=function(a,b){var c=E(a)?a:a.name;if(b=G(a)?a:b,!G(b))throw"Plugin fn required";c&&b&&(Sb[c]=b),b(d)},d}();e.plug("css",function(a){function c(b,c,d){var f="width"===c?b.offsetWidth:b.offsetHeight,g="width"===c?w:x;return f>0?("border"!==d&&a.each(g,function(){d||(f-=parseFloat(e(b,"padding"+this))||0),"margin"===d?f+=parseFloat(e(b,d+this))||0:f-=parseFloat(e(b,"border"+this+"Width"))||0}),f+"px"):""}function d(c,d,e,f){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var h,i=g(d),j=c.style,k=a.cssHooks[i];if(d=a.cssProps[i]||i,e===b)return k&&"get"in k&&(h=k.get(c,!1,f))!==b?h:j[d];if(!("number"==typeof e&&isNaN(e)||null==e||("number"!=typeof e||a.cssNumber[i]||(e+="px"),k&&"set"in k&&(e=k.set(c,e))===b)))try{j[d]=e}catch(l){}}}function e(c,d,e){var f,h=g(d),i=a.cssHooks[h];return d=a.cssProps[h]||h,i&&"get"in i&&(f=i.get(c,!0,e))!==b?f:j?j(c,d,h):void 0}function f(a,b,c){var d,e={};for(var d in b)e[d]=a.style[d],a.style[d]=b[d];c.call(a);for(d in b)a.style[d]=e[d]}function g(a){return a.replace(q,y)}function h(c,d,e,f,g,i){var j=c.length;if("object"==typeof d){for(var k in d)h(c,k,d[k],f,g,e);return c}if(e!==b){f=!i&&f&&a.isFunction(e);for(var l=0;j>l;l++)g(c[l],d,f?e.call(c[l],l,g(c[l],d)):e,i);return c}return j?g(c[0],d):b}function i(b){return a.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1}var j,k,l,m=document,n=m.documentElement,o=/alpha\([^)]*\)/i,p=/opacity=([^)]*)/,q=/-([a-z])/gi,r=/([A-Z])/g,s=/^-?\d+(?:px)?$/i,t=/^-?\d/,u=/^(?:body|html)$/i,v={position:"absolute",visibility:"hidden",display:"block"},w=["Left","Right"],x=["Top","Bottom"],y=function(a,b){return b.toUpperCase()};a.cssHooks={opacity:{get:function(a,b){if(!b)return a.style.opacity;var c=j(a,"opacity","opacity");return""===c?"1":c}}},a._each(["height","width"],function(b){a.cssHooks[b]={get:function(a,d,e){var g;return d?0!==a.offsetWidth?c(a,b,e):(f(a,v,function(){g=c(a,b,e)}),g):void 0},set:function(a,b){return s.test(b)?(b=parseFloat(b),b>=0?b+"px":void 0):b}}}),a.support.opacity||(a.support.opacity={get:function(a,b){return p.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(b,c){var d=b.style;d.zoom=1;var e=a.isNaN(c)?"":"alpha(opacity="+100*c+")",f=d.filter||"";d.filter=o.test(f)?f.replace(o,e):d.filter+" "+e}}),m.defaultView&&m.defaultView.getComputedStyle&&(k=function(c,d,e){var f,g,h;return e=e.replace(r,"-$1").toLowerCase(),(g=c.ownerDocument.defaultView)?((h=g.getComputedStyle(c,null))&&(f=h.getPropertyValue(e),""!==f||a.contains(c.ownerDocument.documentElement,c)||(f=a.style(c,e))),f):b}),m.documentElement.currentStyle&&(l=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!s.test(d)&&t.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),""===d?"auto":d}),j=k||l,a.fn.css=function(a,c){return 2===arguments.length&&c===b?this:h(this,a,c,!0,function(a,c,f){return f!==b?d(a,c,f):e(a,c)})},a.cssNumber={zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},a.cssProps={"float":a.support.cssFloat?"cssFloat":"styleFloat"},a.style=d,a.css=e,a.swap=f,a.camelCase=g;var z,A,B,C,D,E,F=function(){if(!z){var b,c,d,f=m.body,g=m.createElement("div"),h=parseFloat(e(f,"marginTop"))||0,i="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.extend(g.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),g.innerHTML=i,f.insertBefore(g,f.firstChild),b=g.firstChild,c=b.firstChild,d=b.nextSibling.firstChild.firstChild,D=5!==c.offsetTop,E=5===d.offsetTop,c.style.position="fixed",c.style.top="20px",C=20===c.offsetTop||15===c.offsetTop,c.style.position=c.style.top="",b.style.overflow="hidden",b.style.position="relative",B=-5===c.offsetTop,A=f.offsetTop!==h,f.removeChild(g),z=!0}},G=function(a){var b=a.offsetTop,c=a.offsetLeft;return F(),A&&(b+=parseFloat(e(a,"marginTop"))||0,c+=parseFloat(e(a,"marginLeft"))||0),{top:b,left:c}};a.fn.offset=function(){var b,c=this[0];if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return G(c);try{b=c.getBoundingClientRect()}catch(d){}if(!b||!a.contains(n,c))return b?{top:b.top,left:b.left}:{top:0,left:0};var e=m.body,f=i(m),g=n.clientTop||e.clientTop||0,h=n.clientLeft||e.clientLeft||0,j=f.pageYOffset||a.support.boxModel&&n.scrollTop||e.scrollTop,k=f.pageXOffset||a.support.boxModel&&n.scrollLeft||e.scrollLeft,l=b.top+j-g,o=b.left+k-h;return{top:l,left:o}},a.fn.position=function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=u.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(e(a,"marginTop"))||0,c.left-=parseFloat(e(a,"marginLeft"))||0,d.top+=parseFloat(e(b[0],"borderTopWidth"))||0,d.left+=parseFloat(e(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},a.fn.offsetParent=function(){return this.map(function(){for(var a=this.offsetParent||m.body;a&&!u.test(a.nodeName)&&"static"===e(a,"position");)a=a.offsetParent;return a})},a._each(["Height","Width"],function(c){var d=c.toLowerCase();a.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(e(a,d,"padding")):null},a.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(e(b,d,a?"margin":"border")):null},a.fn[d]=function(f){var g=this[0];if(!g)return null==f?null:this;if(a.isFunction(f))return this.each(function(b){var c=a(this);c[d](f.call(this,b,c[d]()))});if(a.isWindow(g)){var h=g.document.documentElement["client"+c],i=g.document.body;return"CSS1Compat"===g.document.compatMode&&h||i&&i["client"+c]||h}if(9===g.nodeType)return Math.max(g.documentElement["client"+c],g.body["scroll"+c],g.documentElement["scroll"+c],g.body["offset"+c],g.documentElement["offset"+c]);if(f===b){var j=e(g,d),k=parseFloat(j);return a.isNaN(k)?j:k}return this.css(d,"string"==typeof f?f:f+"px")}}),a._each(["Left","Top"],function(c,d){var e="scroll"+c;a.fn[e]=function(c){var f,g;return c===b?(f=this[0])?(g=i(f),g?"pageXOffset"in g?g[d?"pageYOffset":"pageXOffset"]:a.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]):null:this.each(function(){g=i(this),g?g.scrollTo(d?a(g).scrollLeft():c,d?c:a(g).scrollTop()):this[e]=c})}})}),e.plug("custom",function(b){for(var c=a,d={},e=c.location.search.substring(1).split("&"),f=b.Key=function(a){this.keyCode=a},g=0;g<e.length;g++){var h=e[g].split("=");d[h[0]]=unescape(h[1])}b.queryString=function(a){return d[a]},f.namedKeys={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,Capslock:20,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46},b._each(f.namedKeys,function(a,b){var c=a;f.prototype["is"+b]=function(){return this.keyCode===c}}),b.key=function(b){return b=b||a.event,new f(b.keyCode||b.which)},b.cancelEvent=function(b){return b||(b=a.event),b.cancelBubble=!0,b.returnValue=!1,b.stopPropagation&&(b.stopPropagation(),b.preventDefault()),!1},b.preventDefault=function(a){a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},b._template=function(a,c){var d=b.templateSettings,e="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(d.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(d.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj","$",e);return c?f(c,b):function(a){return f(a,b)}}}),e.plug("events",function(b){function c(a){return a._jquid||(a._jquid=n++)}function d(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):(o[c+d]=function(){d(a.event)},b.attachEvent("on"+c,o[c+d]))}function e(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):(a.detachEvent("on"+b,o[b+c]),o[b+c]=null)}function f(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function g(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function h(a,d,e,h){if(d=f(d),d.ns)var i=g(d.ns);return b._filter(m[c(a)]||[],function(a){return!(!a||d.e&&a.e!=d.e||d.ns&&!i.test(a.ns)||e&&a.fn!=e||h&&a.sel!=h)})}function i(a,e,g,h,i){var j=c(a),k=m[j]||(m[j]=[]);b._each(e.split(/\s/),function(c){var e=b.extend(f(c),{fn:g,sel:h,del:i,i:k.length});k.push(e),d(a,e.e,i||g)}),a=null}function j(a,d,f,g){var i=c(a);b._each((d||"").split(/\s/),function(c){b._each(h(a,c,f,g),function(b){delete m[i][b.i],e(a,b.e,b.del||b.fn)})})}function k(a){var c=b.extend({originalEvent:a},a);return b._each(p,function(b){a[b]&&(c[b]=function(){return a[b].apply(a,arguments)})}),c}var l=document,m={},n=1,o={};b.bind=d,b.unbind=e;var p=["preventDefault","stopImmediatePropagation","stopPropagation"],q=b.fn;b._each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a){q[a]=function(b,c){return arguments.length>0?this.bind(a,b,c):this.trigger(a)}}),q.bind=function(a,b){return this.each(function(){i(this,a,b)})},q.unbind=function(a,b){return this.each(function(){j(this,a,b)})},q.one=function(a,b){return this.each(function(){var c=this;i(this,a,function(){b.apply(c,arguments),j(c,a,arguments.callee)})})},q.delegate=function(c,d,e){return this.each(function(f,g){i(g,d,e,c,function(d){for(var f=d.target||d.srcElement,h=b.$$(c,g);f&&b._indexOf(h,f)<0;)f=f.parentNode;f&&f!==g&&f!==document&&e.call(f,b.extend(k(d||a.event),{currentTarget:f,liveFired:g}))})})},q.undelegate=function(a,b,c){return this.each(function(){j(this,b,c,a)})},q.live=function(a,c){return b(l.body).delegate(this.selector,a,c),this},q.die=function(a,c){return b(l.body).undelegate(this.selector,a,c),this},q.on=function(a,b,c){return"function"==typeof b?this.bind(a,b):this.delegate(b,a,c)},q.off=function(a,b,c){return"string"==typeof b?this.undelegate(b,a,c):this.unbind(a,c)},q.trigger=function(a){return this.each(function(){if("click"==a&&this[a])return this[a]();if(l.createEvent){var b=l.createEvent("Events");this.dispatchEvent(b,b.initEvent(a,!0,!0))}else if(this.fireEvent)try{"ready"!==a&&this.fireEvent("on"+a)}catch(b){}})},b.init||b(a).bind("load",b.onload)}),e.noConflict=function(b){return a.$===e&&(a.$=d),b&&a.jquip===e&&(a.jquip=c),e},a.$=a.jquip=e}(window),SCAYT.jquip=jquip.noConflict(!0),function(a){"use strict";var b=function(a,c){this.name=a,this.sandbox=c,this.userDictionaryManager=new b.UserDictionaryManager(this.sandbox)};b.wordStatus={unknown:0,misspelled:1,ignored:2,inprocess:3,correct:4,userDictionary:5,userIgnore:6},b.prototype={init:function(){this.sandbox.subscribe("wordsCollected",function(a){this.wordsCollectedHandler(a.wordsCollection)},this),this.sandbox.subscribe("getUserDictionaryName",function(a){this.userDictionaryManager.getUserDictionaryName(a)}),this.sandbox.subscribe("createUserDictionary",function(a){this.userDictionaryManager.createUserDictionary(a)}),this.sandbox.subscribe("restoreUserDictionary",function(a){this.userDictionaryManager.restoreUserDictionary(a)}),this.sandbox.subscribe("renameUserDictionary",function(a){this.userDictionaryManager.renameUserDictionary(a)}),this.sandbox.subscribe("removeUserDictionary",function(a){this.userDictionaryManager.removeUserDictionary(a)}),this.sandbox.subscribe("setUserDictionaryName",function(a){this.userDictionaryManager.setUserDictionaryName(a.name)}),this.sandbox.subscribe("userDictionaryChanged",function(){this.userDictionaryManager.setUserDictionaryNameFromStorage()}),this.sandbox.subscribe("userDictionaryStateChanged",function(){this.userDictionaryStateChangedHandler()}),this.sandbox.subscribe("userDictionaryStateRestored",function(){this.userDictionaryStateRestoredHandler()}),this.sandbox.subscribe("addWordToUserDictionary",function(){this.addWordToUserDictionaryHandler()}),this.sandbox.subscribe("getSuggestionsList",function(a){this.getSuggestionsListHandler(a.word,a.lang)},this)},wordsCollectedHandler:function(a){var b=this.sandbox.getOption("lang"),c=this.addWordsToDictionary(a,b),d=this.getUnknownWords(b);this.getWordsInfo(d,b),this.precessIgnoredWords(c.ignored,b),"th_TH"==b?this.processWithTimeout(this.getMisspelledWords(b),b):this.processWithTimeout(c.misspelled,b)},userDictionaryStateChangedHandler:function(){for(var a=this.getWordsFromUserDictionary(this.sandbox.getOption("lang")),c=0;c<a.length;c++)a[c].setStatus(b.wordStatus.unknown,this.sandbox.getOption("uid"));this.sandbox.fire("startSpellCheck")},addWordToUserDictionaryHandler:function(){var a=this.sandbox.getSelection(),b=a.anchorNode(),c=[],d=this.sandbox.getOption("misspelled_word_node"),e=this.sandbox.getOption("data_attribute_name");if(this.sandbox.Utils.isScaytNode(b)?c.push(b):c=this.sandbox.DOM.findScaytParents(b,d,e),c.length>0){var f=c[0].getAttribute(e);this.userDictionaryManager.addWordToUserDictionary(f)
}this.sandbox.fire("removeMarkupFromWords",{words:[{word:f}]})},getSuggestionsListHandler:function(a,c){this.sandbox.fire("suggestionListSend",{suggestionList:b.Dictionary.getWord(a,c).suggestions})},userDictionaryStateRestoredHandler:function(){for(var a=this.getMisspelledWords(this.sandbox.getOption("lang")),c=0;c<a.length;c++)a[c].setStatus(b.wordStatus.unknown,this.sandbox.getOption("uid"));this.sandbox.fire("removeMarkupInDocument"),this.sandbox.fire("startSpellCheck")},addWordsToDictionary:function(a,c){var d=b.Dictionary,e=this.sandbox.getOption("uid"),f={unknown:[],misspelled:[],ignored:[]};for(var g in a){var h=a[g].word,i=d.getWord(h,c);i||(i=d.addWord(h,c)),0==i.existsInInstance(e)&&i.addToInstance(e),i.getStatus(e)==b.wordStatus.ignored&&i.resetStatus(e),this.sandbox.getOption("ignore-all-caps-words")===!0&&i.word==i.word.toUpperCase()&&i.setStatus(b.wordStatus.ignored,e),this.sandbox.getOption("ignore-words-with-mixed-cases")===!0&&0==(i.word==i.word.toLowerCase())&&0==(i.word==i.word.toUpperCase())&&(i.word.split("")[0]!=i.word.split("")[0].toUpperCase()||i.word.split("").slice(1).join("")!=i.word.split("").slice(1).join("").toLowerCase())&&i.setStatus(b.wordStatus.ignored,e),this.sandbox.getOption("ignore-words-with-numbers")===!0&&i.word.replace(/[0-9]/g,"")!=i.word&&i.setStatus(b.wordStatus.ignored,e),this.sandbox.getOption("ignore-domain-names")===!0&&i.word.replace(/\./g,"")!=i.word&&i.setStatus(b.wordStatus.ignored,e),i.getStatus(e)==b.wordStatus.ignored&&f.ignored.push(i),i.getStatus(e)==b.wordStatus.unknown&&f.unknown.push(i),i.getStatus(e)==b.wordStatus.misspelled&&f.misspelled.push(i)}return f},getWordsFromDictionaryByStatus:function(a,c){var d=this,e=b.Dictionary,f=[];return e.each(a,function(a){a.getStatus(d.sandbox.getOption("uid"))==c&&f.push(a)}),f},getUnknownWords:function(a){var c=this.getWordsFromDictionaryByStatus(a,b.wordStatus.unknown);return c},getMisspelledWords:function(a){var c=this.getWordsFromDictionaryByStatus(a,b.wordStatus.misspelled);return c},getWordsFromUserDictionary:function(a){var c=this.getWordsFromDictionaryByStatus(a,b.wordStatus.userDictionary);return c},precessIgnoredWords:function(a){var b=this;this.sandbox.addDeferredFunction("preocessIgnoredWords",{delay:100,collection:a,partialItemsCount:100,deferredFunction:function(){b.sandbox.fire("removeMarkupFromWords",{words:a})}})},processWithTimeout:function(a,c){var d=this;this.sandbox.addDeferredFunction("precessWords",{delay:1500,collection:a,partialItemsCount:2,deferredFunction:function(a){for(var e=0;e<a.length;)a[e].getStatus(d.sandbox.getOption("uid"))!=b.wordStatus.misspelled?a.splice(e,1):e++;0!==a.length&&d.sandbox.fire("misspelledWordsFound",{words:a,lang:c})}})},getWordsInfo:function(a,c){if(a&&!(a.length<1)){for(var d=this,e="word_",f=0;f<a.length;f++)a[f].setGlobalStatus(b.wordStatus.inprocess);this.sandbox.addDeferredFunction("getWordsInfo",{delay:500,collection:a,partialItemsCount:10,deferredFunction:function(a){for(var f=this,g=[],h=0;h<a.length;h++)g.push(a[h].word);var i=null==d.sandbox.getOption("userDictionaryName")?"":d.sandbox.getOption("userDictionaryName");return d.sandbox.IO.get(new d.sandbox.IO.URL({protocol:d.sandbox.getOption("service_protocol"),host:d.sandbox.getOption("service_host"),port:d.sandbox.getOption("service_port"),path:d.sandbox.getOption("service_path")}).addParameter("cmd","check_spelling").addParameter("customerid",d.sandbox.getOption("customer_id")).addParameter("run_mode","web_service").addParameter("format","json").addParameter("out_type","words").addParameter("version","1.0").addParameter("slang",c).addParameter("custom_dictionary",d.sandbox.getOption("customDictionary")).addParameter("user_dictionary",i).addParameter("user_wordlist",d.userDictionaryManager.getWordsFromUserDictionary()).addParameter("text",g.join(", ")),function(f){if("th_TH"==c)for(var g=0;g<f.length;g++){var h={};h[e+f[g].word]={},h[e+f[g].word].word=f[g].word,d.addWordsToDictionary(h,c),a.push(b.Dictionary.getWord(f[g].word,c))}for(var i={},j=[],g=0;g<f.length;g++)i[e+f[g].word]=f[g];for(g=0;g<a.length;g++){var k=a[g].word,l=i[e+k]&&"true"==i[e+k].ud;i[e+k]&&!l?(a[g].setGlobalStatus(b.wordStatus.misspelled),a[g].suggestions=i[e+k].suggestions,d.sandbox.Utils.inArray(d.userDictionaryManager.userDictionaryWords,k)?a[g].setStatus(b.wordStatus.userDictionary,d.sandbox.getOption("uid")):j.push(a[g])):l?a[g].setStatus(b.wordStatus.userDictionary,d.sandbox.getOption("uid")):a[g].setGlobalStatus(b.wordStatus.correct)}d.sandbox.fireInAllApps("misspelledWordsFound",{words:j,lang:c})},function(b){b.is_critical&&(d.sandbox.setPaused(!0),d.sandbox.removeAllDeferredFunctions()),f.extendCollection(a)}),!0}})}}},b.UserDictionaryManager=function(a){this.sandbox=a,this.init()},b.UserDictionaryManager.prototype={init:function(){var a;if(this.userDictionaryWords=[],this.userDictionaryName=this.sandbox.getOption("userDictionaryName"),!(null!=this.userDictionaryName&&"string"==typeof this.userDictionaryName&&this.userDictionaryName.length>0)){this.userDictionaryKey=this.sandbox.getOption("userDictionaryKey"),this.userDictionaryNameKey=this.sandbox.getOption("userDictionaryNameKey");try{this.userDictionaryWords=this.sandbox.DataStorage.getData(this.userDictionaryKey),null==this.userDictionaryWords&&(this.userDictionaryWords=[],this.sandbox.DataStorage.setData(this.userDictionaryKey,this.userDictionaryWords))}catch(b){this.sandbox.DataStorage.setData(this.userDictionaryKey,this.userDictionaryWords)}a=this.sandbox.DataStorage.getData(this.userDictionaryNameKey),"string"==typeof a&&null!=a&&a.length>0?(this.userDictionaryName=a,this.sandbox.setOption("userDictionaryName",this.userDictionaryName)):this.sandbox.DataStorage.setData(this.userDictionaryNameKey,null)}},onSuccessCallback:function(a,b,c){switch("function"==typeof b.onSuccess&&b.onSuccess(c),a){case"create":this.setUserDictionaryName(c.name),this.sandbox.fireInAllApps("userDictionaryChanged");break;case"delete":this.setUserDictionaryName(null),this.sandbox.fireInAllApps("userDictionaryChanged"),this.sandbox.fire("userDictionaryStateChanged");break;case"rename":this.setUserDictionaryName(c.name),this.sandbox.fireInAllApps("userDictionaryChanged");break;case"check":this.setUserDictionaryName(c.name),this.sandbox.fireInAllApps("userDictionaryChanged"),this.sandbox.fire("userDictionaryStateRestored")}this.clearUserDictionary()},onErrorCallback:function(a,b){"function"==typeof a.onError&&a.onError(b)},createUserDictionary:function(a){var b=this,c="create";this.sandbox.IO.get(new this.sandbox.IO.URL({protocol:this.sandbox.getOption("service_protocol"),host:this.sandbox.getOption("service_host"),port:this.sandbox.getOption("service_port"),path:this.sandbox.getOption("service_path")}).addParameter("cmd","user_dictionary").addParameter("action","create").addParameter("customerid",this.sandbox.getOption("customer_id")).addParameter("v","2.1").addParameter("format","json").addParameter("run_mode","web_service").addParameter("name",a.name).addParameter("wordlist",this.getWordsFromUserDictionary()),function(d){b.onSuccessCallback(c,a,d)},function(c){b.onErrorCallback(a,c)})},removeUserDictionary:function(a){var b=this,c="delete";this.sandbox.IO.get(new this.sandbox.IO.URL({protocol:this.sandbox.getOption("service_protocol"),host:this.sandbox.getOption("service_host"),port:this.sandbox.getOption("service_port"),path:this.sandbox.getOption("service_path")}).addParameter("cmd","user_dictionary").addParameter("action","delete").addParameter("customerid",this.sandbox.getOption("customer_id")).addParameter("v","2.1").addParameter("format","json").addParameter("run_mode","web_service").addParameter("name",this.sandbox.getOption("userDictionaryName")),function(d){b.onSuccessCallback(c,a,d)},function(c){b.onErrorCallback(a,c)})},renameUserDictionary:function(a){var b=this,c="rename";this.sandbox.IO.get(new this.sandbox.IO.URL({protocol:this.sandbox.getOption("service_protocol"),host:this.sandbox.getOption("service_host"),port:this.sandbox.getOption("service_port"),path:this.sandbox.getOption("service_path")}).addParameter("cmd","user_dictionary").addParameter("action","rename").addParameter("customerid",this.sandbox.getOption("customer_id")).addParameter("v","2.1").addParameter("format","json").addParameter("run_mode","web_service").addParameter("name",this.sandbox.getOption("userDictionaryName")).addParameter("new_name",a.newName),function(d){b.onSuccessCallback(c,a,d)},function(c){b.onErrorCallback(a,c)})},restoreUserDictionary:function(a){var b=this,c="check";this.sandbox.IO.get(new this.sandbox.IO.URL({protocol:this.sandbox.getOption("service_protocol"),host:this.sandbox.getOption("service_host"),port:this.sandbox.getOption("service_port"),path:this.sandbox.getOption("service_path")}).addParameter("cmd","user_dictionary").addParameter("action","check").addParameter("customerid",this.sandbox.getOption("customer_id")).addParameter("v","2.1").addParameter("format","json").addParameter("run_mode","web_service").addParameter("name",a.name),function(d){b.onSuccessCallback(c,a,d)},function(c){b.onErrorCallback(a,c)})},addWordToUserDictionaryServer:function(a){var b=this;this.sandbox.IO.get(new this.sandbox.IO.URL({protocol:this.sandbox.getOption("service_protocol"),host:this.sandbox.getOption("service_host"),port:this.sandbox.getOption("service_port"),path:this.sandbox.getOption("service_path")}).addParameter("cmd","user_dictionary").addParameter("action","addword").addParameter("customerid",this.sandbox.getOption("customer_id")).addParameter("v","2.1").addParameter("format","json").addParameter("run_mode","web_service").addParameter("name",this.sandbox.getOption("userDictionaryName")).addParameter("word",a),function(){b.clearUserDictionary()},function(){})},addWordsToUserDictionary:function(a){for(var b=0;b<a.length;b++)this.addWordToUserDictionary(a[b])},getWordsFromUserDictionary:function(){return this.userDictionaryWords.join()},checkUserDictionaryName:function(a){var b;return b="string"==typeof a&&null!=a&&a.length>0?!0:!1},markWordFromUserDictionary:function(a){var c=b.Dictionary,d=this.sandbox.getOption("lang"),e=c.getWord(a,d);e&&e.setStatus(b.wordStatus.userDictionary,this.sandbox.getOption("uid"))},addWordToUserDictionary:function(a){this.checkUserDictionaryName(this.sandbox.getOption("userDictionaryName"))?(this.addWordToUserDictionaryServer(a),this.markWordFromUserDictionary(a)):this.sandbox.Utils.inArray(this.userDictionaryWords,a)||(this.userDictionaryWords.push(a),this.sandbox.DataStorage.setData(this.userDictionaryKey,this.userDictionaryWords),this.markWordFromUserDictionary(a))},clearUserDictionary:function(){this.userDictionaryWords=[],this.sandbox.DataStorage.setData(this.userDictionaryKey,this.userDictionaryWords)},setUserDictionaryName:function(a){this.sandbox.DataStorage.setData(this.userDictionaryNameKey,a),this.sandbox.setOption("userDictionaryName",a)},setUserDictionaryNameFromStorage:function(){this.sandbox.setOption("userDictionaryName",this.sandbox.DataStorage.getData(this.userDictionaryNameKey)),this.setUserDictionaryName(this.sandbox.DataStorage.getData(this.userDictionaryNameKey))}},b.Dictionary=b.Dictionary||function(){var a={},c="word_";return{getWord:function(b,d){return a[d]&&a[d][c+b]},getDictionary:function(){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},addWord:function(d,e){var f=new b.Word(d);return a[e]=a[e]||{},a[e][c+d]=f},each:function(b,c){if("function"==typeof c)for(var d in a[b])c(a[b][d])},clear:function(){a={}}}}(),b.Word=function(a){var b,c={},d={};this.word=a,this.suggestions=[],this.getStatus=function(a){var b;return"undefined"!=typeof c[a]&&(b=c[a]),b},this.resetStatus=function(a){"undefined"!=typeof b&&"undefined"!=typeof a?this.setStatus(b,a):"undefined"!=typeof a&&this.setStatus(0,a)},this.setGlobalStatus=function(a){if("undefined"!=typeof a){b=a;for(var e in d)(0==c[e]||3==c[e])&&(c[e]=b)}},this.setStatus=function(a,b){"undefined"!=typeof a&&"undefined"!=typeof b&&(c[b]=a)},this.addToInstance=function(a){d[a]=this.word,this.resetStatus(a)},this.existsInInstance=function(a){return d[a]?!0:!1}},a.DictionaryManager=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b,this.listeners=[],this.addEventListener,this.removeEventListener=null,window.addEventListener?(this.addEventListener=function(a,b,c){a.addEventListener(b,c,!1)},this.removeEventListener=function(a,b,c){a.removeEventListener(b,c,!1)}):window.attachEvent?(this.addEventListener=function(a,b,c){a.attachEvent("on"+b,function(a){c.call(c,a)})},this.removeEventListener=function(a,b,c){a.detachEvent("on"+b,function(a){c.call(c,a)})}):(this.addEventListener=function(a,b,c){a["on"+b]=function(a){c.call(c,a)}},this.removeEventListener=function(a,b){a["on"+b]=void 0})};b.prototype={init:function(){this.sandbox.subscribe("addEventHandler",function(a){this.addEventHandler(a.element,a.event,a.callback)},this),this.sandbox.subscribe("removeEventHandler",function(a){this.removeEventHandler(a.element,a.event,a.callback)},this),this.sandbox.subscribe("removeAllEventHandlers",function(){this.removeAllEventHandlers()},this)},addEventHandler:function(a,b,c){return this.listeners.push({element:a,event:b,callback:c}),this.addEventListener(a,b,c)},removeEventHandler:function(a,b,c){return this.removeEventListener(a,b,c)},removeAllEventHandlers:function(){for(var a=0;a<this.listeners.length;a++)this.removeEventHandler(this.listeners[a].element,this.listeners[a].event,this.listeners[a].callback);this.listeners=[]}},a.EventProxy=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b};b.prototype={init:function(){this.sandbox.subscribe("markupWords",function(a){this.markupWords(a.ranges)},this),this.sandbox.subscribe("keypress",function(a){this.handleKeypress(a.event)},this),this.sandbox.subscribe("removeMarkupInSelectionNode",function(){this.removeMarkupInSelectionNode()},this),this.sandbox.subscribe("removeMarkupInDocument",function(){this.removeMarkupInDocument()},this),this.sandbox.subscribe("removeMarkupFromWords",function(a){this.removeMarkupFromWords(a.words)},this)},handleKeypress:function(a){var b,c,d=this,e=67,f=88;b=a.ctrlKey&&a.keyCode===e,c=a.ctrlKey&&a.keyCode===f,(!b&&!c&&a.keyCode>40&&a.keyCode<91&&93!=a.keyCode&&91!=a.keyCode&&45!=a.keyCode||32==a.keyCode||13==a.keyCode||8==a.keyCode)&&d.removeMarkupInSelectionNode()},markupWords:function(a){if(0!==a.length){var b=this,c=b.sandbox.getOption("documentContainer"),d=b.sandbox.getOption("misspelled_word_node"),e=b.sandbox.getOption("data_attribute_name"),f=b.sandbox.getOption("misspelled_word_class"),g=b.sandbox.Utils.getCurrentDocument(c).createElement(d);this.sandbox.UILib.addClass(g,f);for(var h=0;h<a.length;h++){var i=a[h].commonAncestorContainer(),j=b.sandbox.Utils.isScaytNode(i)?[i]:b.sandbox.DOM.findScaytParents(i,d,e);if(0===j.length){var k=g.cloneNode(!0),l=a[h].toString();k.setAttribute(e,b.sandbox.Utils.removeSpecialCharacters(l)),k.appendChild(a[h].extractContents()),a[h].insertNode(k);for(var m=b.sandbox.DOM.findScaytChildren(k,d,e);m.length>0;){var n=m.shift();b.removeMarkup(n)}}}}},removeMarkupInDocument:function(){var a=this,b=a.sandbox.getOption("container"),c=a.sandbox.getOption("misspelled_word_node"),d=a.sandbox.getOption("data_attribute_name"),e=a.sandbox.DOM.query(b,c+"["+d+"]");a.removeMarkup(e)},removeMarkupFromWords:function(a){for(var b=this,c=b.sandbox.getOption("container"),d=b.sandbox.getOption("misspelled_word_node"),e=b.sandbox.getOption("data_attribute_name"),f=[],g=0;g<a.length;g++)f.push.apply(f,b.sandbox.DOM.query(c,d+"["+e+'="'+a[g].word+'"]'));b.removeMarkup(f)},removeMarkupInSelectionNode:function(){var a=this,b=a.sandbox.getOption("misspelled_word_node"),c=a.sandbox.getOption("data_attribute_name"),d=a.sandbox.getSelection().anchorNode(),e=null;if(d)for(a.sandbox.Utils.isScaytNode(d)?e=[d]:(e=a.sandbox.DOM.findScaytParents(d,b,c),0===e.length&&(e=a.sandbox.DOM.findScaytChildren(d,b,c))),0===e.length&&3===d.nodeType&&(d=d.nextSibling,d&&(e=a.sandbox.Utils.isScaytNode(d)?[d]:[]));e.length>0;){var f=e.shift();a.removeMarkup(f)}},removeMarkup:function(a){var b,c=this.sandbox.getOption("focused"),d=[].concat(a);for(c&&d.length>0&&(b=this.sandbox.saveSelection());d.length>0;){var e=d.shift(),f=this.sandbox.createRange();f.selectNode(e);var g=f.createContextualFragment(e.innerHTML);f.deleteContents(),f.insertNode(g)}this.sandbox.restoreSelection(b)}},a.Markup=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b};b.prototype={init:function(){this.sandbox.subscribe("startSpellCheck",function(){this.startSpellCheck()}),this.sandbox.subscribe("keypress",function(a){this.handleKeypress(a.event)},this),this.sandbox.subscribe("collectWords",function(a){this.collectWords(a.source)},this)},handleKeypress:function(a){var b=this;(32==a.keyCode||13==a.keyCode||32==a.charCode||13==a.charCode)&&b.sandbox.addDeferredFunction("collectWordsAfterKeypress",{single:!0,delay:0,deferredFunction:function(){var a=b.sandbox.getSelection();if(a.rangeCount()>0){var c=a.getRangeAt(0);b.sandbox.fire("collectWords",{source:c})}}}),b.sandbox.addDeferredFunction("collectWordsAfter4Sec",{single:!0,delay:4e3,deferredFunction:function(){var a=b.sandbox.createRange(),c=b.sandbox.getOption("container");a.selectNodeContents(c),b.sandbox.fire("collectWords",{source:a})}})},startSpellCheck:function(){var a=this.sandbox.createRange(),b=this.sandbox.getOption("container");a.selectNodeContents(b),this.sandbox.fire("collectWords",{source:a.toString()})},collectWords:function(a){var b;switch(typeof a){case"string":b=this.collectWordsInString(a);break;case"object":b=this.collectWordsInRange(a)}return this.sandbox.fire("wordsCollected",{wordsCollection:b}),b},collectWordsInString:function(a){var b=this.sandbox.getOption("punctuationRegExp"),c=this.sandbox.getOption("minWordLength");a=this.sandbox.Utils.removePunctuation(a,b);var d,e="th_TH"===this.sandbox.getOption("lang"),f="word_";d=this.sandbox.Utils.arrayFilter.call(a.split(/\s/),function(a){return""!==a&&a.length>=(e?2:c)?!0:!1});for(var g={},h=0;h<d.length;h++)g[f+d[h]]=g[f+d[h]]||{word:d[h]};return g},collectWordsInRange:function(a){var b=this.createStringWithoutScaytElements(a.commonAncestorContainer());return this.collectWordsInString(b)},createStringWithoutScaytElements:function(a){for(var b=this.sandbox.UILib,c="",d=[a],e=d.shift(),f=this.sandbox.getOption("blockElementsRegex"),g=this.sandbox.getOption("misspelled_word_node"),h=this.sandbox.getOption("data_attribute_name"),i=this.sandbox.getOption("ignoreElementsRegex"),j=this.sandbox.getOption("punctuationRegExp"),k=new RegExp("(^|\\s)rangySelectionBoundary(\\s|$)");e;){switch(e.nodeType){case 3:c+=e.nodeValue;break;case 1:if(e.nodeName.toLowerCase()==g.toLowerCase()&&e.getAttribute(h))c+=e.getAttribute(h).replace(/./g,"");else if(!k.test(b.attr(e,"className"))&&!e.nodeName.match(i)){for(var l=0;l<e.childNodes.length;l++)d.splice(l,0,e.childNodes[l]);e.nodeName.match(f)&&(d.length>e.childNodes.length&&d.splice(l,0,document.createTextNode(" ")),c.length>0&&" "!=c[c.length-1]&&d.splice(0,0,document.createTextNode(" ")))}}e=d.shift()}return c=this.sandbox.Utils.removePunctuation(c,j)}},a.WordsCollector=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b};b.prototype={init:function(){this.sandbox.subscribe("misspelledWordsFound",function(a){this.processMisspelledWords(a.words,a.lang)},this)},processMisspelledWords:function(a,b){var c=this,d=c.sandbox.getOption("lang"),e=c.sandbox.getOption("uid");if(b!=d)return!1;for(var f=[],g=0;g<a.length;g++)a[g].existsInInstance(e)&&1==a[g].getStatus(e)&&f.push(a[g]);0!==f.length&&c.sandbox.addDeferredFunction("findWordRangesForMarkup",{delay:100,collection:f,partialItemsCount:1,deferredFunction:function(a){var b,d=c.sandbox.getOption("focused");d&&(b=c.sandbox.saveSelection());var e=c.findWordRangesForMarkup(a);c.sandbox.fire("markupWords",{ranges:e}),c.sandbox.restoreSelection(b)}})},findWordRangesForMarkup:function(a){var c,d=this.sandbox.createRange(),e=this.sandbox.getOption("container");d.selectNodeContents(e),c=new b.Finder(this.sandbox),c.collectBlockInfo(d.commonAncestorContainer());for(var f=[],g=0;g<a.length;g++)for(c.lastIndex=0;null!==c.findWord(a[g].word);)f.push(c.wordRange);return f.reverse()}},b.Finder=function(a){var b="th_TH"===a.getOption("lang");this.parts=[],this.newParts={getPos:function(a){for(;!this[a];)a--;return this[a]}},this.resultText="",this.lastIndex=0,this.wordRange=null,this.reset=function(){this.parts=[],this.resultText="",this.lastIndex=0,this.wordRange=null},this.collectBlockInfo=function(b){for(var c=[{el:b,editable:"false"==b.getAttribute("contenteditable")?!1:!0}],d=c.shift(),e=a.getOption("blockElementsRegex"),f=a.getOption("ignoreElementsRegex"),g=a.getOption("misspelled_word_node"),h=a.getOption("data_attribute_name"),i=new RegExp("(^|\\s)rangySelectionBoundary(\\s|$)");d;){switch(d.el.nodeType){case 3:var j={node:d.el,start:this.resultText.length,end:this.resultText.length+d.el.nodeValue.length-1};this.newParts[j.start]=j,this.newParts[j.end]=j,this.resultText+=0==d.editable?d.el.nodeValue.replace(/./g," "):d.el.nodeValue;break;case 1:if(d.el.nodeName.toLowerCase()==g.toLowerCase()&&d.el.getAttribute(h))this.resultText+=d.el.getAttribute(h).replace(/./g,"_");else if(!i.test(a.UILib.attr(d.el,"className"))&&!f.test(d.el.nodeName)){for(var k="false"==d.el.getAttribute("contenteditable")?!1:!0,l=0;l<d.el.childNodes.length;l++)c.splice(l,0,{el:d.el.childNodes[l],editable:k});d.el.nodeName.match(e)&&(c.length>d.el.childNodes.length&&c.splice(l,0,{el:document.createTextNode(" "),editable:!0}),this.resultText.length>0&&" "!=this.resultText[this.resultText.length-1]&&c.splice(0,0,{el:document.createTextNode(" "),editable:!0}))}}d=c.shift()}this.resultText=a.Utils.removePunctuation(this.resultText,a.getOption("punctuationRegExp"))},this.findWord=function(c){var d=this.resultText.indexOf(c,this.lastIndex);if(d>0)this.lastIndex=d+c.length,b||(d=this.resultText.charAt(d-1).match(/\s/)?d:"skipped",d=this.lastIndex==this.resultText.length||this.resultText.charAt(d+c.length).match(/\s/)?d:"skipped");else{if(0!==d)return null;this.lastIndex=d+c.length,d=this.resultText.charAt(d+c.length).match(/\s/)?d:"skipped"}if("skipped"==d)return this.findWord.call(this,c);var e=a.createRange(),f=this.newParts.getPos(d);e.setStart(f.node,d-f.start);var g=this.newParts.getPos(d+c.length-1);return e.setEnd(g.node,d+c.length-g.start),e=a.Utils.fixRangeBoundaryPoints(e),this.wordRange=e,this.wordRange}},a.WordsFinder=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b};b.prototype={init:function(){this.sandbox.subscribe("replaceWord",function(a){this.replaceWordInSelection(a.word)},this),this.sandbox.subscribe("ignoreWord",function(){this.ignoreWordInSelection()},this),this.sandbox.subscribe("ignoreAllWords",function(){this.ignoreWordInDocument()},this)},replaceWordInSelection:function(a){for(var b=this.getScaytNodesFromSelection();b.length>0;){var c=b.shift();this.replaceWordByNode(c,a)}},ignoreWordInSelection:function(){var a=this.getScaytNodesFromSelection();this.ignoreWords(a)},ignoreWordInDocument:function(){for(var a=this.getScaytNodesFromSelection(),b=this.sandbox.getOption("container"),c=this.sandbox.getOption("misspelled_word_node"),d=this.sandbox.getOption("data_attribute_name"),e=[];a.length>0;){var f=a.shift();e.push.apply(e,this.sandbox.DOM.query(b,c+"["+d+'="'+f.getAttribute(d)+'"]'))}this.ignoreWords(e)},getScaytNodesFromSelection:function(){var a=this.sandbox.getSelection(),b=a.anchorNode(),c=this.sandbox.getOption("misspelled_word_node"),d=this.sandbox.getOption("data_attribute_name"),e=this.sandbox.Utils.isScaytNode(b)?[b]:this.sandbox.DOM.findScaytParents(b,c,d);return e},ignoreWords:function(b){for(var c=this.sandbox.saveSelection(),d=this.sandbox.createRange(),e=a.DictionaryManager.Dictionary,f=this.sandbox.getOption("lang"),g=this.sandbox.getOption("data_attribute_name"),h=this.sandbox.getOption("uid");b.length>0;){var i=b.shift(),j=i.getAttribute(g);e.getWord(j,f)&&e.getWord(j,f).setStatus(a.DictionaryManager.wordStatus.userIgnore,h),d.selectNode(i);var k=d.createContextualFragment(i.innerHTML);d.deleteContents(),d.insertNode(k)}this.sandbox.restoreSelection(c)},replaceWordByNode:function(a,b){a.innerHTML=b;var c=this.sandbox.createRange();c.selectNodeContents(a),c.collapse(!1);var d=this.sandbox.getSelection();d.removeAllRanges(),d.addRange(c);var e=this.sandbox.saveSelection();c=this.sandbox.createRange(),c.selectNode(a);var f=c.createContextualFragment(a.innerHTML);c.deleteContents(),c.insertNode(f),this.sandbox.restoreSelection(e)}},a.WordsProcessor=b}(SCAYT),function(a){"use strict";var b=function(a,b){var c=b.getOption("service_protocol");this.name=a,this.sandbox=b,this.closeBannerTimeout=void 0,this.contextMenuContainer=null,this.bannerShown=0,this.template='<div id="scayt_banner" style="padding: 5px; border: 1px solid rgb(143, 143, 115); position: absolute; font-size: 12px; line-height: 1.33; font-family: Arial,Verdana,sans-serif; z-index: 9998; width: 200px; min-height: 60px; z-index: 9998; background-color: rgb(255, 255, 255); white-space: normal; left: 102%;top: 0; background-position: initial initial; background-repeat: initial initial;"><div style="overflow: hidden; text-align: center;"><a id="closeBanner" href="#" style="cursor:pointer; float: right; width: 20px; height: 20px; background: url('+c+'://www.webspellchecker.net/images/fck/close.jpg) no-repeat 100% 50%; margin-top: -2px;"></a><a id="scayt__btn-more" style="cursor:pointer; display: inline;color:green;" href="http://www.webspellchecker.net/fcklicensed" target="_blank">Click to know more...</a></div>'+'Spell checking provided by WebSpellChecker.net. <a id="scayt__btn-hosted" style="cursor:pointer; color: #0000FF; text-decoration:underline; display: inline;" target="_blank" href="http://www.webspellchecker.net/fckhosted"> Hosted </a> and <a id="scayt__btn-licensed" style="cursor:pointer; color: #0000FF; text-decoration:underline; display: inline;" target="_blank" href="http://www.webspellchecker.net/fcklicensed"> Licensed </a> spell-checking solutions.</div>'};b.prototype={init:function(){this.sandbox.Template.create("scayt_banner_tpl",this.template),this.sandbox.subscribe("showBanner",function(a){this.showBannerHandler(a.contextMenuContainerSelector)},this),this.sandbox.subscribe("hideBanner",function(){this.hideBanner()},this)},showBannerHandler:function(a){var b=this,c=this.sandbox.UILib;this.bannerShown=2==this.bannerShown?0:this.bannerShown+1,b.sandbox.getOption("showBanner")&&1==this.bannerShown&&b.sandbox.addDeferredFunction("showBanner",{single:!0,delay:100,deferredFunction:function(){var d=c.find(a)[0];b.contextMenuContainer=d,d&&(c.css(d,{overflow:"visible"}),b.showBanner(d)),c.on("mousedown",d,"#closeBanner",function(){b.hideBanner(),b.sandbox.setOption("showBanner",!1)})}})},actionLinks:function(a){var b=this,c=a.target||a.srcElement;c.href&&("closeBanner"===c.id?(b.hideBanner(),b.sandbox.setOption("showBanner",!1)):(window.open(c.href,"_blank"),b.contextMenuContainer&&b.contextMenuContainer.focus()))},showBanner:function(a){var b=this,c=this.sandbox.UILib,d=b.sandbox.Template.render("scayt_banner_tpl",{}),e=c.proxy(b.actionLinks,b);c.append(a,d),c.off("mousedown","#scayt_banner",e),c.one("mousedown","#scayt_banner",e)},hideBanner:function(){var a=this.sandbox.UILib,b=a.find("#scayt_banner")[0];b&&(a.css(a.parent(b),{overflow:""}),a.remove(b))}},a.Banner=b}(SCAYT),function(a){"use strict";var b=function(a,b){this.name=a,this.sandbox=b};b.prototype={init:function(){var a=this;a.sandbox.subscribe("keypress",function(a){this.handleKeypress(a.event)},a),a.sandbox.subscribe("appStarted",function(){a.sandbox.fire("addEventHandler",{element:this.getContainer(),event:"compositionstart",callback:function(){a.sandbox.setPaused(!0)}}),a.sandbox.fire("addEventHandler",{element:this.getContainer(),event:"compositionend",callback:function(){a.sandbox.setPaused(!1),a.sandbox.addDeferredFunction("collectWordsAfterWorkIME",{single:!0,delay:0,deferredFunction:function(){var b=a.sandbox.getSelection();if(b.rangeCount()>0){var c=b.getRangeAt(0);a.sandbox.fire("collectWords",{source:c})}}})}})},a)},handleKeypress:function(a){var b=this;(229===a.keyCode||0===a.keyCode)&&b.sandbox.fire("removeMarkupInSelectionNode")},getContainer:function(){var a=this;return a.sandbox.getOption("container")},browser:function(){var a=window.navigator.userAgent;return{version:function(){var b,c=a,d=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(d[1])?(b=/\brv[ :]+(\d+(\.\d+)?)/g.exec(c)||[],"IE "+(b[1]||"")):(d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"],b=c.match(/version\/([\.\d]+)/i),null!=b&&(d[2]=b[1]),d.join(" "))}(),opera:/opera/i.test(a)||/opr/i.test(a),msie:/msie/i.test(a)&&!/opera/i.test(a)||/trident\//i.test(a),msie6:/msie 6/i.test(a)&&!/opera/i.test(a),msie7:/msie 7/i.test(a)&&!/opera/i.test(a),msie8:/msie 8/i.test(a)&&!/opera/i.test(a),msie9:/msie 9/i.test(a)&&!/opera/i.test(a),mozilla:/firefox/i.test(a),chrome:/chrome/i.test(a),safari:!/chrome/i.test(a)&&/webkit|safari|khtml/i.test(a),iphone:/iphone/i.test(a),ipod:/ipod/i.test(a),iphone4:/iphone.*OS 4/i.test(a),ipod4:/ipod.*OS 4/i.test(a),ipad:/ipad/i.test(a),android:/android/i.test(a),bada:/bada/i.test(a),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(a),msie_mobile:/iemobile/i.test(a),safari_mobile:/iphone|ipod|ipad/i.test(a),opera_mobile:/opera mini|opera mobi/i.test(a),opera_mini:/opera mini/i.test(a),mac:/mac/i.test(a)}}()},a.IME=b}(SCAYT),SCAYT.CKSCAYT=function(a,b){function c(){function a(a){var b,d;b=c.createStyleSheet(a),d=b.ownerNode?b.ownerNode:b.owningElement,d.setAttribute("data-cke-temp","cke_temp")}var b;if(f.getOption("basePath")){for(var c="iframe"==f.getOption("documentContainer").nodeName.toLowerCase()?f.getOption("documentContainer").contentWindow.document:document,d=c.getElementsByTagName("link"),e=0;e<d.length;e++)if(d[e].href==f.getOption("cssPath"))return;document.createStyleSheet?"complete"==c.readyState?a(f.getOption("cssPath")):c.onreadystatechange=function(){"complete"==c.readyState&&a(f.getOption("cssPath"))}:(b=document.createElement("link"),b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",f.getOption("cssPath")),b.setAttribute("data-cke-temp","cke_temp"),c.getElementsByTagName("head")[0].appendChild(b))}}function d(){var a=f.getSelection(),b=a.getRangeAt(0),c=b.toString();c||(a.expand("word"),f.fire("selectionIsChanged",{}))}SCAYT.RangeCreator.Lib&&(SCAYT.RangeCreator.Lib.initialized=!1),a.basePath=this.basePath;var e=new SCAYT(a),f=new SCAYT.Sandbox("CKSCAYTApp",e);c(f),SCAYT.CustomHandlers=SCAYT.CustomHandlers||{};for(var g in SCAYT.CustomHandlers)SCAYT.CustomHandlers.hasOwnProperty(g)&&f.subscribe(g,SCAYT.CustomHandlers[g]);e.instanceManager.add(f);var h={IME:SCAYT.IME,WordsCollector:SCAYT.WordsCollector,WordsFinder:SCAYT.WordsFinder,Dictionary:SCAYT.DictionaryManager,Markup:SCAYT.Markup,WordsProcessor:SCAYT.WordsProcessor,EventProxy:SCAYT.EventProxy,Banner:SCAYT.Banner};for(var i in h)e.register(i,h[i]),e.start(i);var j=f.UILib,k=f.getOption("container");return j.on("dblclick",k,d),f.fire("addEventHandler",{element:k,event:"keydown",callback:function(a){f.fire("keypress",{event:a})}}),f.subscribe("commitOptions",function(a){if(!f.Utils.objectIsEmpty(a.changedOptions)){a.changedOptions.lang&&a.changedOptions.lang!==f.getOption("lang")&&(f.fire("removeMarkupInDocument",{}),f.removeAllDeferredFunctions()),f.setPaused(!0);var b=SCAYT.DictionaryManager.Dictionary,c=f.getOption("lang");b.each(c,function(a){a.getStatus(f.getOption("uid"))==SCAYT.DictionaryManager.wordStatus.inprocess&&a.setStatus(SCAYT.DictionaryManager.wordStatus.unknown,f.getOption("uid"))});for(var d in a.changedOptions)a.changedOptions.hasOwnProperty(d)&&f.setOption(d,a.changedOptions[d]);
f.setPaused(!1),f.fire("startSpellCheck",{document:f.getOption("container")})}},this),f.IO.get(new f.IO.URL({protocol:f.getOption("service_protocol"),host:f.getOption("service_host"),port:f.getOption("service_port"),path:f.getOption("service_path")}).addParameter("cmd","get_lang_list").addParameter("run_mode","web_service").addParameter("customerid",f.getOption("customer_id")).addParameter("slang",f.getOption("lang")),function(a){f.setOption("langList",a.langList);var c=f.getOption("lang");c in f.getOption("langList").ltr||c in f.getOption("langList").rtl||f.setOption("lang",f.getDefaultOption("lang")),f.Localization.loadLocalization(f.getOption("localization"),f),f.fire("startSpellCheck",{document:f.getOption("container")}),b&&b.call(window)},function(a){a.is_critical&&(f.setPaused(!0),f.removeAllDeferredFunctions())}),f.getOption("sendBannerRequest")&&f.IO.get(new f.IO.URL({protocol:f.getOption("service_protocol"),host:f.getOption("service_host"),port:f.getOption("service_port"),path:f.getOption("service_path")}).addParameter("cmd","getbanner").addParameter("run_mode","web_service").addParameter("customerid",f.getOption("customer_id")).addParameter("format","json"),function(a){a.banner?f.setOption("showBanner",!0):f.setOption("showBanner",!1)},function(){}),f.fire("appStarted",{document:f.getOption("container")}),{tabToOpen:null,replaceSelectionNode:function(a){f.fire("replaceWord",a)},getSuggestions:function(a,b){f.fire("getSuggestionsList",{lang:a,word:b})},subscribe:function(a,b){f.subscribe(a,b)},fire:function(a,b){f.fire(a,b)},ignoreWord:function(a){f.fire("ignoreWord",a)},addWordToUserDictionary:function(a){f.fire("addWordToUserDictionary",a)},ignoreAllWords:function(a){f.fire("ignoreAllWords",a)},removeMarkupInSelectionNode:function(a){f.fire("removeMarkupInSelectionNode",a)},destroy:function(){f.getOption("paused")&&f.setPaused(!1),f.fire("removeMarkupInDocument",{}),f.fire("removeAllEventHandlers",{}),f.setPaused(!0),f.removeAllDeferredFunctions(),e.instanceManager.remove(f.getOption("uid")),e.removeBindings(),j.off("dblclick",k,d);for(var a in this)this.hasOwnProperty(a)&&delete this[a]},setMarkupPaused:function(a){a?(f.setPaused(!0),f.removeAllDeferredFunctions()):(f.setPaused(!1),f.fire("startSpellCheck",{document:f.getOption("container")}))},getLangList:function(){return f.getOption("langList")},getApplicationConfig:function(){return f.getOption(["ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"])},getLang:function(){return f.getOption("lang")},commitOption:function(a){f.fire("commitOptions",a)},getUserDictionaryName:function(){return f.getOption("userDictionaryName")},createUserDictionary:function(a,b,c){f.fire("createUserDictionary",{name:a,onSuccess:b,onError:c})},restoreUserDictionary:function(a,b,c){f.fire("restoreUserDictionary",{name:a,onSuccess:b,onError:c})},renameUserDictionary:function(a,b,c){f.fire("renameUserDictionary",{newName:a,onSuccess:b,onError:c})},removeUserDictionary:function(a,b,c){f.fire("removeUserDictionary",{name:a,onSuccess:b,onError:c})},setUserDictionaryName:function(a){f.fire("setUserDictionaryName",{name:a})},isUserDictionaryExist:function(){return"string"==typeof f.getOption("userDictionaryName")},removeMarkupFromString:function(a){return f.removeMarkupFromString(a)},getLogo:function(){return f.getOption("basePath")+f.getOption("scaytLogo")},getVersion:function(){return f.getOption("scaytVersion")},isScaytNode:function(a){return f.Utils.isScaytNode(a)},findScaytNode:function(a){for(var b=0;b<a.length;b++)if(this.isScaytNode(a[b]))return a[b];return null},getSelectionNode:function(){var a=f.getSelection(),b=a.anchorNode(),c=f.Utils.isScaytNode(b)?[b]:f.DOM.findScaytParents(b,f.getOption("misspelled_word_node"),f.getOption("data_attribute_name"));return c.length>0?c[0]:null},setCustomDictionary:function(a){f.setOption("customDictionary",a)},setUserDictionary:function(a){f.setOption("customDictionary",a)},getNodeAttribute:function(){return f.getOption("data_attribute_name")},getContainerNode:function(){return f.getOption("container")},getCustomDictionary:function(){return f.getOption("customDictionary")},getLocal:function(a){return f.Localization.getLocal(a,f.getOption("localization"))},showBanner:function(a){f.fire("showBanner",{contextMenuContainerSelector:a})},hideBanner:function(){f.fire("hideBanner",{})}}},SCAYT.CKSCAYT.prototype.basePath=function(){var a=window.SCAYT_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])ckscayt.js(?:\?.*)?$/i);if(d){a=d[1];break}}if(-1==a.indexOf(":/")&&(a=0===a.indexOf("/")?window.location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:window.location.href.match(/^[^\?]*\/(?:)/)[0]+a),!a)throw"Path could not be automatically detected.";return a}();
